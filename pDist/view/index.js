!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=8)}([function(t,e){t.exports='<tr>\n    <td>{{ d.agentName }}41</td>\n    <td>{{ d.xifenPriceYuan}}</td>\n    <td>{{ d.sunFansCount}}</td>\n    <td>\n        <p>\n            <lable class="btn btn-blue deleteAgent2"  data="{{d.agentId}}">删除</lable>\n        </p>\n    </td>\n</tr>'},function(t,e){t.exports='<tr>\n    <td data-value="agentName">{{ d.agentName }}40</td>\n    <td data-value="price">{{ d.xifenPriceYuan }}</td>\n    <td>\n        <p>\n            <lable class="btn btn-blue agentProfileConfBtn"  data="{{ d.agentId}}" data-price="{{ d.xifenPriceYuan}}" data-updateprice="{{d.updatedXifenYuan}}"  data-maxXifenPriceYuan="{{d.maxXifenPriceYuan}}" data-isineffect="{{d.isInEffect}}">收益分配</lable>&nbsp;&nbsp;\n            <lable class="btn btn-blue wxagent2Config_href"  data="{{ d.agentId}}"><a  href="main.html#wxagent2config?agentId={{ d.agentId}}" class="btn-blue">二级代理商</a></lable>\n        </p>\n    </td>\n</tr>'},function(t,e){t.exports='<div id="configAgentProfilePage">\n    <div style="padding: 50px 150px">\n        <label id="errorMsg" style="color: red; display: none"></label>\n        <input id="config_agentId" type="hidden"/>\n        <input id="maxXifenPriceYuan" type="hidden"/>\n        <p><label>代理商当前吸粉单价(元):&nbsp;&nbsp;</label> <label id="currentXifenPrice"></label>  <label id="invalidTomorrow_lable" style="color: red"></label></p>\n        <p><label>调整代理商吸粉单价(元):&nbsp;</label><input class="input_text" size="10" id="agentPrice"><label style="font-size: 12px; color: #9d9d9d">(请设置0.35~0.6元之间的数值，新价格将于第二天生效)</label></p>\n        <p style="text-align: center"><button id="submitAddLevelAgent" type="button" class="btn btn-blue">确定</button>&nbsp;&nbsp;&nbsp;<input id="closeAddLevel1AgentPopPage" type="button" class="btn btn-blue" value="取消" /></p>\n        <div id="alertmsg" style="display: none; color:red"><p  >调整后的代理商吸粉单价低于一级代理商配置给旗下店铺或二级代理商的价格，将导致一级代理商部分收益为负，再次点击确定可继续操作</p></div>\n    </div>\n</div>'},function(t,e){t.exports='<div id="addLevel1AgentPopPage">\n    \n                        <div style="padding: 50px 150px">\n        \n                        <label id="errorMsg" style="color: red; display: none"></label>\n        \n                        <p><label>代理商名称:&nbsp;&nbsp;</label> \n                        <input width="20" id="agentName" class="input_text"></p>\n        \n                        <input type="hidden" id="config_agentId"/>\n        \n                        <p style="text-align: center">\n                        <button id="submitAddLevelAgent" type="button" class="btn btn-blue">确定</button>&nbsp;&nbsp;&nbsp;<input id="closeAddLevel1AgentPopPage" type="button" class="btn btn-blue" value="取消" /></p>\n    \n                        </div>\n\n                    </div>'},function(t,e){t.exports='<div id="addLevel1AgentPopPage">\n    <div style="padding: 50px 150px">\n        <label id="errorMsg" style="color: red; display: none"></label>\n        <p><label>代理商名称:&nbsp;&nbsp;</label> <input width="20" id="agentName" class="input_text"></p>\n        <p><label>吸粉单价(元):&nbsp;</label><input class="input_text" width="20" id="agentPrice"><label style="font-size: 12px; color: #9d9d9d">(请设置0.35~0.6元之间的数值，新价格将于第二天生效)</label></p>\n        <p style="text-align: center"><button id="submitAddLevelAgent" type="button" class="btn btn-blue">确定</button>&nbsp;&nbsp;&nbsp;<input id="closeAddLevel1AgentPopPage" type="button" class="btn btn-blue" value="取消" /></p>\n    </div>\n</div>'},function(t,e,a){(function(t){var n;!function(){"use strict";var i,l={open:"{{",close:"}}"},s=function(t,e,a){var n=["#([\\s\\S])+?","([^{#}])*?"][t||0];return r((e||"")+l.open+n+l.close+(a||""))},d=function(t){return String(t||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},o=function(t,e){var a="Laytpl Error：";return"object"==typeof console&&console.error(a+t+"\n"+(e||"")),a+t},r=function(t){return new RegExp(t,"g")},c=function(t){this.tpl=t};(c.pt=c.prototype).parse=function(t,e){var a=t,n=r("^"+l.open+"#",""),i=r(l.close+"$","");t='"use strict";var view = "'+(t=t.replace(/[\r\t\n]/g," ").replace(r(l.open+"#"),l.open+"# ").replace(r(l.close+"}"),"} "+l.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(s(),function(t){return'";'+(t=t.replace(n,"").replace(i,"")).replace(/\\/g,"")+'; view+="'}).replace(s(1),function(t){var e='"+(';return t.replace(/\s/g,"")===l.open+l.close?"":(t=t.replace(r(l.open+"|"+l.close),""),/^=/.test(t)&&(t=t.replace(/^=/,""),e='"+_escape_('),e+t.replace(/\\/g,"")+')+"')}))+'";return view;';try{return this.cache=t=new Function("d, _escape_",t),t(e,d)}catch(t){return delete this.cache,o(t,a)}},c.pt.render=function(t,e){var a,n=this;return t?(a=n.cache?n.cache(t,d):n.parse(n.tpl,t),e?void e(a):a):o("no data")},(i=function(t){return"string"!=typeof t?o("Template not found"):new c(t)}).config=function(t){for(var e in t=t||{})l[e]=t[e]},i.v="1.1",void 0===(n=function(){return i}.call(e,a,e,t))||(t.exports=n)}()}).call(this,a(9)(t))},function(t,e){t.exports='<div class="app-main-content">\n    <div class="app-content countTmp">\n        <ol class="breadcrumb">\n            <li><a href="main.html#wxconfig">代理商配置</a></li>\n            <li>二级代理商配置</li>\n        </ol>\n        <div class="tabname">\n            <ul>\n                <li>二级代理商配置</li>\n            </ul>\n        </div>\n        <div class="tab">\n            <form class="findCondition">\n                <ul class="form-inline">\n                    <li class="w200">\n                        <label>代理商名称</label>\n                        <input name="agentName" id="search_agentName_input" type="text" maxlength="50" size="500" class="form-control w105"/>\n                    </li>\n                    <li>\n                        <span class="btn btn-blue J-search" id =\'serchAgentBtn\'>搜索</span>\n                    </li>\n                    <li>\n                        <span class="btn btn-blue J-export" id="addLevel2AgentBtn">添加二级代理商</span>\n                    </li>\n                </ul>\n            </form>\n        </div>\n        <div class="delist">\n            <table>\n                <thead>\n                <tr>\n                    <th width="8%">二级代理商名称</th>\n                    <th width="8%">吸粉单价</th>\n                    <th width="8%">今日新增粉丝数</th>\n                    <th width="16%">操作</th>\n                </tr>\n                </thead>\n                <tbody class="J-countList" id="wxConfigList">\n\n                </tbody>\n            </table>\n        </div>\n\n        \x3c!--分页--\x3e\n        <div class="tcdPageCode_box">\n            <div class="tcdPageCode_main">\n                <span class="pageCount">\n                  <select class="count_pageSize allPageSize">\n                    <option selected="selected" value="15">15</option>\n                    <option value="50">50</option>\n                    <option value="100">100</option>\n                  </select>\n                </span>\n                <div class="count_tcdPageCode allPageCode"></div>\n            </div>\n        </div>\n    </div>\n\n\n</div>'},function(t,e){t.exports='<div class="app-main-content">\n    <div class="app-content countTmp">\n        <div class="tabname">\n            <ul>\n                <li>代理商配置</li>\n            </ul>\n        </div>\n        <div class="tab">\n            <form class="findCondition">\n                <ul class="form-inline">\n                    <li class="w200">\n                        <label>代理商名称</label>\n                        <input name="agentName" id="search_agentName_input" type="text" class="form-control w105"/>\n                    </li>\n                    <li>\n                        <span class="btn btn-blue J-search" id="serchAgentBtn">搜索</span>\n                    </li>\n                    <li>\n                        <span class="btn btn-blue J-export" id="addLevel1AgentBtn">添加一级代理商</span>\n                    </li>\n                </ul>\n            </form>\n        </div>\n        <div class="delist">\n            <table>\n                <thead>\n                <tr>\n                    <th width="8%">代理商名称</th>\n                    <th width="8%">当前吸粉单价</th>\n                    <th width="16%">操作</th>\n                </tr>\n                </thead>\n\n                <tbody class="J-countList" id="wxConfigList">\n\n                </tbody>\n\n            </table>\n        </div>\n\n        \x3c!--分页--\x3e\n        <div class="tcdPageCode_box">\n            <div class="tcdPageCode_main">\n                <span class="pageCount">\n                  <select class="count_pageSize allPageSize">\n                    <option selected="selected" value="15">15</option>\n                    <option value="50">50</option>\n                    <option value="100">100</option>\n                  </select>\n                </span>\n                <div class="count_tcdPageCode allPageCode"></div>\n            </div>\n        </div>\n    </div>\n\n\n</div>'},function(t,e,a){"use strict";a.r(e);var n=function(){var t={init:function(e,a){return t.fillHtml(e,a),void t.bindEvent(e,a)},fillHtml:function(t,e){return function(){t.empty(),e.current>1?t.append('<a href="javascript:;" class="prevPage prevPage-img">上一页</a>'):(t.remove(".prevPage"),t.append('<span class="disabled prevPage-img">上一页</span>')),1!=e.current&&e.current>=4&&4!=e.pageCount&&t.append('<a href="javascript:;" class="tcdNumber">1</a>'),e.current-2>2&&e.current<=e.pageCount&&e.pageCount>5&&t.append("<span>...</span>");var a=e.current-2,n=e.current+2;for((a>1&&e.current<4||1==e.current)&&n++,e.current>e.pageCount-4&&e.current>=e.pageCount&&a--;a<=n;a++)a<=e.pageCount&&a>=1&&(a!=e.current?t.append('<a href="javascript:;" class="tcdNumber">'+a+"</a>"):t.append('<span class="current">'+a+"</span>"));e.current+2<e.pageCount-1&&e.current>=1&&e.pageCount>5&&t.append("<span>...</span>"),e.current!=e.pageCount&&e.current<e.pageCount-2&&4!=e.pageCount&&t.append('<a href="javascript:;" class="tcdNumber">'+e.pageCount+"</a>"),e.current<e.pageCount?t.append('<a href="javascript:;" class="nextPage nextPage-img">下一页</a>'):(t.remove(".nextPage"),t.append('<span class="disabled nextPage-img">下一页</span>'))}()},bindEvent:function(e,a){return e.off("click","a.tcdNumber"),e.off("click","a.prevPage"),e.off("click","a.nextPage"),e.off("click","a.input_btn"),e.on("click","a.tcdNumber",function(){var n=parseInt($(this).text());t.fillHtml(e,{current:n,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(n)}),e.on("click","a.prevPage",function(){var n=parseInt(e.children("span.current").text());t.fillHtml(e,{current:n-1,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(n-1)}),e.on("click","a.nextPage",function(){var n=parseInt(e.children("span.current").text());t.fillHtml(e,{current:n+1,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(n+1)}),void $(document).on("click",".input_btn",function(){var n=parseInt($(".input_text").val());/^[1-9]+[0-9]*]*$/.test(n)?n>a.pageCount?alert("跳转页不能大于总页数"):(t.fillHtml(e,{current:n,pageCount:a.pageCount}),"function"==typeof a.backFn&&a.backFn(n)):alert("请输入一个正整数")})}};$.fn.createPage=function(e){var a=$.extend({pageCount:10,current:1,backFn:function(){}},e);t.init(this,a)}};var i=function(){return'\n    <div class="app-main-content agentTmpl">\n      <div class="app-content-top">\n        <p><span class="backBefore"><img src="adsys/images/left_icon.png">返回</span><span><img src="adsys/images/right_icon.png">投放规则 —— <span class="toAgentTitle">代理商选择</span></span></p>\n      </div>\n      <div class="app-content agentTmp">\n        <div class="tabname">\n          <ul>\n            <li class="toAgentTabName">广告投放</li>\n            <span id="saveMerchant" class="save saveAgent">保存</span>\n            <span id="saveMerchant" class="save deleteAgent" style="display:none">删除</span>\n          </ul>\n        </div>\n        <div class="condition tab">\n            <input type="hidden" name="sort" id="sort" value="" />\n            <input type="hidden" name="assort" id="assort" value="" />\n            <ul class="aj_listTop">\n              <li>\n                <label>代理商名称：</label>\n                <input type="text" name="agentTmp_agentName" id="agentTmp_agentName" value="" class="form-control"/>\n              </li>\n              <li>\n                <label>角色分类：</label>\n                <select name=\'agentTmp_role\' class="agentTmp_role form-control select">\n                  <option value="" selected="selected">全部</option>\n                  <option value="agent">代理商</option>\n                  <option value="strategy">战略</option>\n                  <option value="business">城市商圈</option>\n                  <option value="register">自注册</option>\n                </select>\n              </li>\n              <li>\n                <label>是否KA：</label>\n                <select name=\'isKA\' class="isKA form-control select">\n                  <option value="" selected="selected">全部</option>\n                  <option value="1">是</option>\n                  <option value="0">否</option>\n                </select>\n              </li>\n              <li>\n                <label>是否可控</label>\n                <select name=\'isControl\' class="isControl form-control select">\n                  <option value="" selected="selected">全部</option>\n                  <option value="1">是</option>\n                  <option value="0">否</option>\n                </select>\n              </li>\n              <li>\n                <label>渠道经理</label>\n                <select name=\'magerName\' class="magerName form-control select">\n                </select>\n              </li>\n              <li>\n                <input name="" class="button sousuoBtn" type="button" value=" 搜 索 "/>\n              </li>\n            </ul>\n            <input type="hidden" id="xToken" name="xToken" value="f54a2c8b-26f4-4bc3-bb7c-ad1f389523ac" />\n        </div>\n\n        \x3c!--/搜索--\x3e\n        <div class="searchList">\n          <div class="search-L">\n            <table>\n              <thead>\n                <tr>\n                  <th><input type="checkbox" id="leftCheck" /></th>\n                  <th>代理商名称</th>\n                  <th>角色分类</th>\n                  <th>KA</th>\n                  <th>可控</th>\n                  <th>渠道经理</th>\n                </tr>\n              </thead>\n              <tbody class="J-reslist">\n\n              </tbody>\n            </table>\n\n            \x3c!--分页--\x3e\n            <div class="tcdPageCode_box">\n              <div class="tcdPageCode_main">\n                <span class="pageCount">\n                  <select class="agent_pageSize allPageSize">\n                    <option selected="selected" value="15">15</option>\n                    <option value="50">50</option>\n                    <option value="100">100</option>\n                  </select>\n                </span>\n                <div class="agent_tcdPageCode allPageCode"></div>\n              </div>\n            </div>\n          </div>\n\n          <div class="search-R">\n            <table>\n              <thead>\n                <tr>\n                  \x3c!--<th><input type="checkbox" id="rightCheck" /></th>--\x3e\n                  <th>\n                    代理商名称\n                  </th>\n                  <th>角色分类</th>\n                  <th>KA</th>\n                  <th>可控</th>\n                  <th>\n                    渠道经理\n                  </th>\n                </tr>\n              </thead>\n              <tbody id="addMerchant">\n\n              </tbody>\n            </table>\n          </div>\n          <div id="loading" style="display:none; width:200px; text-align:center;position:absolute;left:50%">\n            <div style="width:32px; height:32px; margin:20px auto 30px">\n              <img src="adsys/images/loading.gif"></div>\n            <p>信息正在提交中，请稍候……</p>\n          </div>\n          <div id="dataLoading" style="display:none; width:200px; text-align:center;position:absolute;left:50%">\n            <div style="width:32px; height:32px; margin:20px auto 30px">\n              <img src="adsys/images/loading.gif"></div>\n            <p>数据加载中，请稍候……</p>\n          </div>\n        </div>\n        <div class="tipmsg">您选择的店铺总数已达到500上限，请保存！</div>\n      </div>\n    </div>\n'};n();var l,s,d,o;let r={init(){$(".app").append($(i()));this.getQueryString(),this.getAvailableAgentList(15,1),this.getAgentChannelNames(),this.backBefore(),this.checkbox_router(),this.leftCheckAll(),this.onSearch(),this.saveAgentList(),this.rightCheck(),this.changePage()},getQueryString(){var t=window.location.hash,e=new Object;if(-1!=t.indexOf("?")){var a=t.substr(1);if(-1!=t.indexOf("&"))for(var n=a.split("?")[1].split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=n[i].split("=")[1];else{var r=a.split("?")[1];e[r.split("=")[0]]=r.split("=")[1]}}l=e.toAgent,o=e.adType,e.addAgentFirst,2==l||"2"==l?($(".toAgentTitle").html("编辑代理商"),$(".toAgentTabName").html("删除代理商"),$(".agentTmp .deleteAgent").show(),$(".agentTmp .saveAgent").hide()):($(".toAgentTitle").html("代理商选择"),$(".toAgentTabName").html("添加代理商"),$(".agentTmp .deleteAgent").hide(),$(".agentTmp .saveAgent").show()),"","","","","",s=e.adId,d=l},page(t,e,a){if(e)e=e;else e=15;$(".agent_tcdPageCode").createPage({pageCount:Math.ceil(t/e),current:a,backFn:function(t){r.getAvailableAgentList(e,t)}})},changePage(){$(".agent_pageSize").change(function(){var t=$(this).val();r.getAvailableAgentList(t,1)})},getAvailableAgentList(t,e){var a={adId:s,adType:o,agentName:$("#agentTmp_agentName").val(),channelManagerId:$(".agentTmpl .magerName").val(),customerType:$(".agentTmp_role").val(),isControl:$(".agentTmpl .isControl").val(),isKa:$(".agentTmpl .isKA").val(),isNew:d,pageNo:e,pageSize:t};$(".agentTmpl .magerName").val()||delete a.channelManagerId,$.ajax({type:"get",url:"/rest/ad/put/getAvailableAgentList",dataType:"json",data:a,success:function(a){if("0002005"!=a.code)if(a.success){var n=a.agentList,i=a.total;r.page(i,t,e),$("#dataLoading").show();for(var l="",s=0;s<n.length;s++){if(1==n[s].isKa||"1"==n[s].isKa)var d="是";else d="否";if(1==n[s].isControl||"1"==n[s].isControl)var o="是";else o="否";switch(n[s].customerType){case"agent":var c="代理商";break;case"strategy":c="战略";break;case"business":c="城市商圈";break;case"agentCustomerType":break;default:c=""}var p=$("#addMerchant tr"),u=[];p.length>0&&p.each(function(t,e){u.push($(e).attr("attr-adId"))});for(var h='<input type="checkbox" id="'+n[s].agentId+'" name="checkbox_router"/>',g=0;g<u.length;g++)if(n[s].agentId==u[g]){h='<input type="checkbox" id="'+n[s].agentId+'" name="checkbox_router" checked="checked"/>';break}l+="<tr>\t\t\t\t<td>"+h+'</td>\t\t\t\t<td class="c-td-2" title="'+n[s].agentName+'">'+n[s].agentName+'</td>\t\t\t\t<td class="c-td-2">'+c+'</td>\t\t\t\t<td class="c-td-1">'+d+'</td>\t\t\t\t<td class="c-td-1">'+o+'</td>\t\t\t\t<td class="c-td-1" title="'+n[s].channelManager+'">'+n[s].channelManager+"</td>\t\t\t  </tr>"}$(".J-reslist").html(l),$(".agentTmp").find("input[name='checkbox_router']:checked").length==$(".agentTmp").find("input[name='checkbox_router']").length?$("#leftCheck").prop("checked",!0):$("#leftCheck").prop("checked",!1),$("#dataLoading").hide()}else $("#dataLoading").hide(),alert(a.msg);else{var m=window.location.host;window.location.href="http://"+m+"/view/login.html"}}})},getAgentChannelNames(){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentChannelNames",dataType:"json",success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">全部</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].id+'">'+e[n].nickname+"</option>";$(".magerName").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}})},checkbox_router(){$(".agentTmp").on("click","input[name='checkbox_router']",function(){var t=$("#addMerchant tr"),e=[];if(t.length>0&&t.each(function(t,a){e.push($(a).attr("attr-adId"))}),$(this).is(":checked")){var a=$(this).parent().nextAll(),n=$(a[0]).html(),i=$(a[1]).html(),l=$(a[2]).html(),s=$(a[3]).html(),d=$(a[4]).html();if(e.length>=500)return r.showTips("您选择的店铺总数已达到500上限，请保存！"),$(this).prop("checked",!1),!1;-1==e.indexOf($(this).attr("id"))&&$("#addMerchant").prepend("<tr attr-adId="+$(this).attr("id")+'><td class="c-td-2" title="'+n+'">'+n+'</td><td class="c-td-2">'+i+'</td><td class="c-td-1">'+l+'</td><td class="c-td-1">'+s+'</td><td class="c-td-1" title="'+d+'">'+d+"</td></tr>")}else confirm("取消勾选删除此代理商?")?$("#addMerchant").find("tr[attr-adId="+$(this).attr("id")+"]").remove():$(this).prop("checked",!0);$(".agentTmp").find("input[name='checkbox_router']:checked").length==$(".agentTmp").find("input[name='checkbox_router']").length?$("#leftCheck").prop("checked",!0):$("#leftCheck").prop("checked",!1)})},leftCheckAll(){$(".agentTmp").on("click","#leftCheck",function(){var t=$("#addMerchant tr"),e=[];t.length>0&&t.each(function(t,a){e.push($(a).attr("attr-adId"))});var a=0;if($(this).is(":checked")&&$("input[name='checkbox_router']").each(function(t,e){$(e).is(":checked")||(a+=1)}),e.length+a>500){var n=t.length,i="您已选"+n+"条，还可选"+(500-n)+"条，单次提交不超过500上限";return r.showTips(i),!1}$(this).is(":checked")?$("input[name='checkbox_router']").each(function(t){if(!$(this).is(":checked")){$(this).prop("checked",!0);var a=$(this).parent().nextAll(),n=$(a[0]).html(),i=$(a[1]).html(),l=$(a[2]).html(),s=$(a[3]).html(),d=$(a[4]).html();-1==e.indexOf($(this).attr("id"))&&$("#addMerchant").prepend("<tr attr-adId="+$(this).attr("id")+'><td class="c-td-2" title="'+n+'">'+n+'</td><td class="c-td-2">'+i+'</td><td class="c-td-1">'+l+'</td><td class="c-td-1">'+s+'</td><td class="c-td-1" title="'+d+'">'+d+"</td></tr>")}}):confirm("取消勾选此店铺?")?$("input[name='checkbox_router']").each(function(t){$(this).prop("checked",!1),$("#addMerchant").find("tr[attr-adId="+$(this).attr("id")+"]").remove()}):$(this).prop("checked",!0)})},rightCheck(){$(".agentTmpl").on("click","#rightCheck",function(){$(this).is(":checked")?$("#addMerchant").find("input").prop("checked",!0):$("#addMerchant").find("input").prop("checked",!1)})},onSearch(){$(".sousuoBtn").click(function(){r.getAvailableAgentList(15,1)})},saveAgentList(){$(".save").click(function(){if(1==l||"1"==l)var t=1;else t=2;var e=$("#addMerchant tr"),a="";e.length>0&&e.each(function(t,e){a+=$(e).attr("attr-adId")+"^"}),a.length?$.ajax({type:"post",url:"/rest/ad/put/saveOrDeleteAgents",dataType:"json",data:{adId:s,agentIds:a.substring(0,a.length-1),isSave:t,adType:o},success:function(t){if("0002005"!=t.code)t.success?($("#loading").show(),0==t.count||"0"==t.count?$(".agentCheckPng").hide():$(".agentCheckPng").show(),$("#loading").hide(),history.pushState({},null,"main.html#create?isNew=1"),$(".app-main-content").hide(),$(".createTmpl").show()):(alert(t.msg),$("#loading").hide());else{var e=window.location.host;window.location.href="http://"+e+"/view/login.html"}}}):alert("请至少选择一家")})},backBefore(){$(".agentTmpl .backBefore").click(function(){history.pushState({},null,"main.html#create?isNew=1"),$(".app-main-content").hide(),$(".createTmpl").show()})},showTips(t){$(".tipmsg").html(t),$(".tipmsg").show(3,function(){setTimeout(function(){$(".tipmsg").hide()},3e3)})}};var c=r;var p=function(){return'\n\t\t<div class="app-main-content shopTmpl">\n\t\t\t<div class="app-content-top">\n\t\t\t\t<p><span class="backBefore"><img src="adsys/images/left_icon.png">返回</span><span><img src="adsys/images/right_icon.png">投放规则 —— <span class="toshopTitle">店铺选择</span></span><span></span></p>\n\t\t\t</div>\n\t\t\t<div class="app-content shopTmp">\n\t\t\t\t<div class="tabname">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li class=\'toshopTabName\'>添加店铺</li>\n\t\t\t\t\t\t<span id="saveMerchant" class="save saveShop">保存</span>\n\t\t\t\t\t\t<span id="saveMerchant" class="save deleteShop" style="display:none">删除</span>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="condition tab">\n\t\t\t\t\t\t<input type="hidden" name="sort" id="sort" value="" />\n\t\t\t\t\t\t<input type="hidden" name="assort" id="assort" value="" />\n\t\t\t\t\t\t<ul class="aj_listTop">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>店铺名称：</label>\n\t\t\t\t\t\t\t\t<input type="text" name="shopTmp_shopName" id="shopTmp_shopName" value="" class="form-control"/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>所属代理商：</label>\n\t\t\t\t\t\t\t\t<input name="shopTmp_agent" class="shopTmp_agent" type="text">\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>是否KA：</label>\n\t\t\t\t\t\t\t\t<select name=\'isKA\' class="shop_isKA form-control select">\n\t\t\t\t\t\t\t\t\t<option value="" selected="selected">全部</option>\n\t\t\t\t\t\t\t\t\t<option value="1">是</option>\n\t\t\t\t\t\t\t\t\t<option value="0">否</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>是否可控</label>\n\t\t\t\t\t\t\t\t<select name=\'isControl\' class="shop_isControl form-control select">\n\t\t\t\t\t\t\t\t\t<option value="" selected="selected">全部</option>\n\t\t\t\t\t\t\t\t\t<option value="1">是</option>\n\t\t\t\t\t\t\t\t\t<option value="0">否</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<label>类型</label>\n\t\t\t\t\t\t\t<select class="adType1" style="margin:0 8px 0 0">\n\t\t\t\t\t\t\t\t<option value="" selected="selected">--请选择--</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<select class="adType2" style="margin:0 8px 0 0">\n\t\t\t\t\t\t\t\t<option value="" selected="selected">--请选择--</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span style="white-space:nowrap;">\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="areaCode" id="areaCode" value="" style="width:200px">区域筛选：\n\t\t\t\t\t\t\t\t\t<select id="province" style="margin:0 8px 0 0"><option value="">--请选择--</option></select>\n\t\t\t\t\t\t\t\t\t<select id="city" style="margin:0 8px 0 0"><option value="">--请选择--</option></select>\n\t\t\t\t\t\t\t\t\t<select id="county" style="margin:0 8px 0 0"><option value="">--请选择--</option></select>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<input name="" class="button btn-blue shop_searchBtn" type="button" value=" 搜 索 " />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<input type="hidden" id="xToken" name="xToken" value="f54a2c8b-26f4-4bc3-bb7c-ad1f389523ac" />\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!--/搜索--\x3e\n\t\t\t\t<div class="searchList">\n\t\t\t\t\t<div class="search-L">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th><input type="checkbox" id="shop_leftCheck" /></th>\n\t\t\t\t\t\t\t\t\t<th>店铺名称</th>\n\t\t\t\t\t\t\t\t\t<th>所属代理商</th>\n\t\t\t\t\t\t\t\t\t<th>地区</th>\n\t\t\t\t\t\t\t\t\t<th>类型</th>\n\t\t\t\t\t\t\t\t\t<th>KA</th>\n\t\t\t\t\t\t\t\t\t<th>可控</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody class="J-shopList">\n\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\x3c!--分页--\x3e\n\t\t\t\t\t\t<div class="tcdPageCode_box">\n\t\t\t\t\t\t\t<div class="tcdPageCode_main">\n\t\t\t\t\t\t\t\t<span class="pageCount">\n\t\t\t\t\t\t\t\t\t<select class="shop_pageSize allPageSize">\n\t\t\t\t\t\t\t\t\t\t<option selected="selected" value="15">15</option>\n\t\t\t\t\t\t\t\t\t\t<option value="50">50</option>\n\t\t\t\t\t\t\t\t\t\t<option value="100">100</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div class="shop_tcdPageCode allPageCode"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="search-R">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>店铺名称</th>\n\t\t\t\t\t\t\t\t\t<th>所属代理商</th>\n\t\t\t\t\t\t\t\t\t<th>地区</th>\n\t\t\t\t\t\t\t\t\t<th>类型</th>\n\t\t\t\t\t\t\t\t\t<th>KA</th>\n\t\t\t\t\t\t\t\t\t<th>可控</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody id="addShoplist_r">\n\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="loading" style="display:none; width:200px; text-align:center;position:absolute;left:50%">\n\t\t\t\t\t\t<div style="width:32px; height:32px; margin:20px auto 30px">\n\t\t\t\t\t\t\t<img src="adsys/images/loading.gif"></div>\n\t\t\t\t\t\t<p>信息正在提交中，请稍候……</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="dataLoading" style="display:none; width:200px; text-align:center;position:absolute;left:50%">\n\t\t\t\t\t\t<div style="width:32px; height:32px; margin:20px auto 30px">\n\t\t\t\t\t\t\t<img src="adsys/images/loading.gif"></div>\n\t\t\t\t\t\t<p>数据加载中，请稍候……</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tipmsg">您选择的店铺总数已达到500上限，请保存！</div>\n\t\t\t</div>\n\t\t</div>'};n();var u,h,g,m,f;let v={init(){$(".app").append($(p()));this.getQueryString(),this.changePage(),this.backBefore(),this.adTypeOne(),this.province(),this.checkbox_router(),this.leftCheckAll(),this.onSearch(),this.saveShopList()},getQueryString(){var t=window.location.hash,e=new Object;if(-1!=t.indexOf("?")){var a=t.substr(1);if(-1!=t.indexOf("&"))for(var n=a.split("?")[1].split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=n[i].split("=")[1];else{var l=a.split("?")[1];e[l.split("=")[0]]=l.split("=")[1]}}u=e.toShop,f=e.adType,2==u||"2"==u||4==u||"4"==u?(2==u||"2"==u?($(".toshopTitle").html("编辑例外店铺"),$(".toshopTabName").html("删除例外店铺")):($(".toshopTitle").html("编辑店铺"),$(".toshopTabName").html("删除店铺")),$(".shopTmp .deleteShop").show(),$(".shopTmp .saveShop").hide(),g=2):(1==u||"1"==u?($(".toshopTitle").html("例外店铺选择"),$(".toshopTabName").html("添加例外店铺")):($(".toshopTitle").html("店铺选择"),$(".toshopTabName").html("添加店铺")),$(".shopTmp .deleteShop").hide(),$(".shopTmp .saveShop").show(),g=1),m=1==u||"1"==u||2==u||"2"==u?"/rest/ad/put/getPutAgentMerchants":"/rest/ad/put/getAvailableMerchantList","","","","","","",h=e.adId,v.getPutShopMerchants(15,1)},page(t,e,a){if(e)e=e;else e=15;$(".shop_tcdPageCode").createPage({pageCount:Math.ceil(t/e),current:a,backFn:function(t){v.getPutShopMerchants(e,t)}})},changePage(){$(".shop_pageSize").change(function(){var t=$(this).val();v.getPutShopMerchants(t,1)})},getPutShopMerchants(t,e){var a=new Object;a.adId=h,a.agentName=$(".shopTmp_agent").val(),a.merchantName=$("#shopTmp_shopName").val(),a.isControl=$(".shop_isControl").val(),a.isKa=$(".shop_isKA").val(),a.isNew=g,a.pageNo=e,a.pageSize=t,$("#province").val()&&(a.areaCode=$("#province").val()),$("#city").val()&&(a.areaCode=$("#city").val()),$("#county").val()&&(a.areaCode=$("#county").val()),$(".adType1").val()&&(a.bizType=$(".adType1").val()),$(".adType2").val()&&(a.bizType=$(".adType2").val()),3!=u&&"3"!=u&&4!=u&&"4"!=u||(a.adType=f),$.ajax({type:"get",url:m,dataType:"json",data:a,success:function(a){if("0002005"!=a.code)if(a.success){var n=a.merchantlist,i=a.total;v.page(i,t,e),$("#dataLoading").show();for(var l="",s=0;s<n.length;s++){if(1==n[s].isKa||"1"==n[s].isKa)var d="是";else d="否";if(1==n[s].isControl||"1"==n[s].isControl)var o="是";else o="否";var r=$("#addShoplist_r tr"),c=[];r.length>0&&r.each(function(t,e){c.push($(e).attr("attr-adId"))});for(var p='<input type="checkbox" id="'+n[s].merchantId+'" name="checkbox_router" />',u=0;u<c.length;u++)if(n[s].merchantId==c[u]){p='<input type="checkbox" id="'+n[s].merchantId+'" name="checkbox_router" checked="checked"/>';break}l+="<tr>                <td>"+p+'</td>                <td class="c-td-2" title="'+n[s].merchantName+'">'+n[s].merchantName+'</td>                <td class="c-td-2" title="'+n[s].agentName+'">'+n[s].agentName+'</td>                <td class="c-td-1" title="'+n[s].areaValue+'">'+n[s].areaValue+'</td>                <td class="c-td-1" title="'+n[s].bizValue+'">'+n[s].bizValue+'</td>                <td class="c-td-1">'+d+'</td>                <td class="c-td-1">'+o+"</td>              </tr>"}$(".J-shopList").html(l),$(".shopTmpl").find("input[name='checkbox_router']:checked").length==$(".shopTmpl").find("input[name='checkbox_router']").length?$("#shop_leftCheck").prop("checked",!0):$("#shop_leftCheck").prop("checked",!1),$("#dataLoading").hide()}else $("#dataLoading").hide(),alert(a.msg);else{var h=window.location.host;window.location.href="http://"+h+"/view/login.html"}}})},checkbox_router(){$(".J-shopList").on("click","input[name='checkbox_router']",function(){var t=$("#addShoplist_r tr"),e=[];if(t.length>0&&t.each(function(t,a){e.push($(a).attr("attr-adId"))}),$(this).is(":checked")){var a=$(this).parent().nextAll(),n=$(a[0]).html(),i=$(a[1]).html(),l=$(a[2]).html(),s=$(a[3]).html(),d=$(a[4]).html(),o=$(a[5]).html();if(e.length>=500)return v.showTips("您选择的店铺总数已达到500上限，请保存！"),$(this).prop("checked",!1),!1;-1==e.indexOf($(this).attr("id"))&&$("#addShoplist_r").prepend("<tr attr-adId="+$(this).attr("id")+'><td class="c-td-2" title="'+n+'">'+n+'</td><td class="c-td-2" title="'+i+'">'+i+'</td><td class="c-td-1" title="'+l+'">'+l+'</td><td class="c-td-1" title="'+s+'">'+s+'</td><td class="c-td-1">'+d+'</td><td class="c-td-1">'+o+"</td></tr>")}else confirm("取消勾选此店铺?")?$("#addShoplist_r").find("tr[attr-adId="+$(this).attr("id")+"]").remove():$(this).prop("checked",!0);$(".J-shopList").find("input[name='checkbox_router']:checked").length==$(".J-shopList").find("input[name='checkbox_router']").length?$("#shop_leftCheck").prop("checked",!0):$("#shop_leftCheck").prop("checked",!1)})},leftCheckAll(){$("#shop_leftCheck").on("click",function(){var t=$("#addShoplist_r tr"),e=[];t.length>0&&t.each(function(t,a){e.push($(a).attr("attr-adId"))});var a=0;if($(this).is(":checked")&&$("input[name='checkbox_router']").each(function(t,e){$(e).is(":checked")||(a+=1)}),e.length+a>500){var n=t.length,i="您已选"+n+"条，还可选"+(500-n)+"条，单次提交不超过500上限";return v.showTips(i),!1}$(this).is(":checked")?$("input[name='checkbox_router']").each(function(t){if(!$(this).is(":checked")){$(this).prop("checked",!0);var a=$(this).parent().nextAll(),n=$(a[0]).html(),i=$(a[1]).html(),l=$(a[2]).html(),s=$(a[3]).html(),d=$(a[4]).html(),o=$(a[5]).html();-1==e.indexOf($(this).attr("id"))&&$("#addShoplist_r").prepend("<tr attr-adId="+$(this).attr("id")+'><td class="c-td-2" title="'+n+'">'+n+'</td><td class="c-td-2" title="'+i+'">'+i+'</td><td class="c-td-1" title="'+l+'">'+l+'</td><td class="c-td-1" title="'+s+'">'+s+'</td><td class="c-td-1">'+d+'</td><td class="c-td-1">'+o+"</td></tr>")}}):confirm("取消勾选此店铺?")?$("input[name='checkbox_router']").each(function(t){$(this).prop("checked",!1),$("#addShoplist_r").find("tr[attr-adId="+$(this).attr("id")+"]").remove()}):$(this).prop("checked",!0)})},onSearch(){$(".shop_searchBtn").click(function(){v.getPutShopMerchants(15,1)})},saveShopList(){$(".shopTmp .save").click(function(){if(1==u||"1"==u||3==u||"3"==u)var t=1;else t=2;var e=$("#addShoplist_r tr"),a="";if(e.length>0&&e.each(function(t,e){a+=$(e).attr("attr-adId")+"^"}),a.length){if(1==u||"1"==u||2==u||"2"==u)var n="/rest/ad/put/saveOrDeleteExpectiveMerchants";else n="/rest/ad/put/saveOrDeletePutMerchants";$.ajax({type:"post",url:n,dataType:"json",data:{adId:h,merchantIds:a.substring(0,a.length-1),isSave:t,adType:f},success:function(t){if("0002005"!=t.code)t.success?($("#loading").show(),3==u||"3"==u||4==u||"4"==u?0==t.count||"0"==t.count?$(".ShopCheckPng").hide():$(".ShopCheckPng").show():0==t.count||"0"==t.count?$(".agentCheckPng").hide():$(".agentCheckPng").show(),$("#loading").hide(),history.pushState({},null,"main.html#create?isNew=1"),$(".app-main-content").hide(),$(".createTmpl").show()):(alert(t.msg),$("#loading").hide());else{var e=window.location.host;window.location.href="http://"+e+"/view/login.html"}}})}else alert("请至少选择一家")})},backBefore(){$(".shopTmpl .backBefore").click(function(){history.pushState({},null,"main.html#create?isNew=1"),$(".app-main-content").hide(),$(".createTmpl").show()})},adTypeOne(){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentBaseData",dataType:"json",data:{pid:0,category:"biztype"},success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">--请选择--</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].realValue+'">'+e[n].showValue+"</option>";$(".adType1").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}}),$(".adType1").change(function(){var t=$(this).val();v.adTypeTwo(t)})},adTypeTwo(t){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentBaseData",dataType:"json",data:{pid:t,category:"biztype"},success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">--请选择--</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].realValue+'">'+e[n].showValue+"</option>";$(".adType2").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}})},province(){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentBaseData",dataType:"json",data:{pid:0,category:"map"},success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">--请选择--</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].realValue+'">'+e[n].showValue+"</option>";$("#province").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}}),$("#province").change(function(){var t=$(this).val();v.city(t),$("#county").html('<option value="" selected="selected">--请选择--</option>')})},city(t){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentBaseData",dataType:"json",data:{pid:t,category:"map"},success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">--请选择--</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].realValue+'">'+e[n].showValue+"</option>";$("#city").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}}),$("#city").change(function(){var t=$(this).val();v.county(t)})},county(t){$.ajax({type:"get",url:"/rest/ad/basedata/getAgentBaseData",dataType:"json",data:{pid:t,category:"map"},success:function(t){if("0002005"!=t.code){if(t.success){for(var e=t.data,a='<option value="" selected="selected">--请选择--</option>',n=0;n<e.length;n++)a+='<option value="'+e[n].realValue+'">'+e[n].showValue+"</option>";$("#county").html(a)}}else{var i=window.location.host;window.location.href="http://"+i+"/view/login.html"}}})},showTips(t){$(".tipmsg").html(t),$(".tipmsg").show(3,function(){setTimeout(function(){$(".tipmsg").hide()},3e3)})}};var b=v;var A,y,w,x,k,T,I=function(){return'\n    <div class="app-main-content createTmpl">\n\n      <div class="app-content">\n        \x3c!--创建素材--\x3e\n        <div class="material">\n          <div class="tabname">\n            <ul>\n              <li>创建广告</li>\n            </ul>\n          </div>\n          <div class="main">\n            <div class="adChoise">\n              <p style="font-size:14px;color:#000;font-weight:bold">选择广告位</p>\n              <ul class="clearfix">\n              \x3c!--选择广告位--\x3e\n                <li>\n                  <input name="adradio" type="radio" class="fullbg" id="fullbg" value="100" checked="checked"/>\n                  <label for="fullbg">全屏背景图</label>\n                </li>\n                <li>\n                  <input name="adradio" type="radio" class="banner" id="banner" value="101"/>\n                  <label for="banner">主页Banner</label>\n                </li>\n                <li>\n                  <input name="adradio" type="radio" class="bombAd" id="bombAd" value="102"/>\n                  <label for="bombAd">弹屏广告（全屏）</label>\n                </li>\n                <li>\n                  <input name="adradio" type="radio" class="func" id="func" value="103"/>\n                  <label for="func">功能区</label>\n                </li>\n                \x3c!--<li>\n                  <input name="adradio" type="radio" class="info" id="info" value="104"/>\n                  <label for="info">信息流</label>\n                </li>--\x3e\n                <li>\n                  <input name="adradio" type="radio" class="fullAd" id="fullAd" value="105"/>\n                  <label for="fullAd">全屏轮播广告</label>\n                </li>\n                <li>\n                  <input name="adradio" type="radio" class="jumpAd" id="jumpAd" value="106"/>\n                  <label for="jumpAd">全屏自动跳转广告</label>\n                </li>\n                <li>\n                  <input name="adradio" type="radio" class="jsad" id="jsad" value="107"/>\n                  <label for="jsad">悬浮广告</label>\n                </li>\n              </ul>\n            </div>\n            <div class="sucai">\n              <p style="font-size:14px;color:#000;font-weight:bold;margin-bottom:20px">选择广告素材</p>\n              <ul class="sucaiTab">\n                \x3c!--全屏背景--\x3e\n                <li class=\'Fullbg_main ad_editMain\' data-adtype="100">\n                  <div class="uploadifyBox uploadFullbg editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadFullbg" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：750*1334）</span>\n                      <div class="bgImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/fullbg.png"></div>\n                </li>\n                \x3c!--banner--\x3e\n                <li class=\'Banner_main ad_editMain\' data-adtype="101">\n                  <div class="uploadifyBox uploadBannerbg editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadBannerbg" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：750*230）</span>\n                      <p style="margin-top:10px;">图片链接：<input type="url" id="bannerHref" name="bannerHref" value="" class="bannerHref AdHref"  placeholder="可为空,表示无链接"></p>\n                      <div class="BannerImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/bannerImg.png"></div>\n                </li>\n                \x3c!--弹屏广告--\x3e\n                <li class=\'bombAd_main ad_editMain\' data-adtype="102">\n                  <div class="uploadifyBox uploadbombAd editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadbombAd" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：600*750）</span>\n                      <p style="margin-top:10px;">图片链接：<input type="url" id="bombAdHref" name="bombAdHref" value="" class="bombAdHref AdHref"  placeholder="可为空,表示无链接"></p>\n                      <div class="bombAdImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/bombAdImg.png"></div>\n                </li>\n                \x3c!--功能区--\x3e\n                <li class=\'func_main ad_editMain\' data-adtype="103">\n                  <div class="uploadifyBox uploadfuncImg editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadfuncImg" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：347*146）</span>\n                      <p style="margin-top:10px;">图片链接：<input type="url" id="funcHref" name="funcHref" value="" class="funcHref AdHref"  placeholder="不能为空"></p>\n                      <div class="funcImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/fullAdImg.png"></div>\n                </li>\n                \x3c!--信息流--\x3e\n                <li class=\'info_main ad_editMain\' data-adtype="104">\n                  <table style="display: inline-block">\n                    <tbody>\n                      <tr>\n                        <td valign="top">图文格式：</td>\n                        <td class=\'r imgsize\'>\n                        <input name="imgsize" type="radio" class="small" id="small" value="1" checked="checked"/><label for=\'small\'>小图</label>\n                        <input name="imgsize" type="radio" class="big" id="big" value="2" style="margin-left:70px;"/><label for=\'big\'>大图</label><br/>\n                        （小图尺寸：96*96，大图尺寸：690*230）\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>选择图片：</td>\n                        <td class=\'r\'>\n                          <div class="btn btn-primary btn-addon fileinput-button">\n                            图片上传\n                            <input id="fileuploadfuncImg" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                          </div>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>标题：</td>\n                        <td class=\'r\'><input type="text" id="infoTitle" name="infoTitle" value="" placeholder="不超过10个字符" maxlength=\'10\' class="infoIpt"></td>\n                      </tr>\n                      <tr>\n                        <td valign="top">介绍：</td>\n                        <td class=\'r\'><textarea id="Introduce" name="Introduce" value="" placeholder="不超过30个字符" maxlength=\'30\' class="infoIpt" style="height:70px;"></textarea></td>\n                      </tr>\n                      <tr>\n                        <td valign="top">地址：</td>\n                        <td class=\'r\'><textarea id="infoAddress" name="infoAddress" value="" placeholder="不超过24个字符" maxlength=\'24\' class="infoIpt" style="height:70px;"></textarea></td>\n                      </tr>\n                      <tr>\n                        <td>按钮：</td>\n                        <td class=\'r isShowBtn\'>\n                          <input name="infoisShow" type="radio" class="infoShow" id="infoShow" value="1" checked="checked"/><label for=\'infoShow\'>显示</label>\n                          <input name="infoisShow" type="radio" class="infoHide" id="infoHide" value="0" style="margin-left:70px"/><label for=\'infoHide\'>隐藏</label>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>按钮文字：</td>\n                        <td class=\'r\'>\n                          <input type="text" id="BtnTxt" name="BtnTxt" value="" placeholder="不超过4个字" maxlength=\'4\' class="infoIpt">\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>图片链接：</td>\n                        <td class=\'r\'>\n                          <input type="url" id="infoHref" name="infoHref" value="" class="infoHref AdHref infoIpt"  placeholder="可为空,表示无链接">\n                        </td>\n                      </tr>\n                      <tr>\n                        <td colspan="2"><div class="infoImgsmall"></div><div class="infoImgbig"></div></td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <div class="Imglocation"><img src="adsys/images/infoAdImg.png"></div>\n                </li>\n                \x3c!--全屏轮播广告--\x3e\n                <li class=\'fullAd_main ad_editMain\' data-adtype="105">\n                  <div class="uploadifyBox uploadfullAd editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadfullAd" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：750*1334）</span>\n                      <p style="margin-top:10px;">图片链接：<input type="url" id="fullAdHref" name="fullAdHref" value="" class="fullAdHref AdHref"  placeholder="可为空,表示无链接"></p>\n                      <div class="fullAdImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/fullAdImg.png"></div>\n                </li>\n                \x3c!--全屏自动跳转广告--\x3e\n                <li class=\'jumpAd_main ad_editMain\' data-adtype="106">\n                  <div class="uploadifyBox uploadjumpAd editContent">\n                      <span class="txt">选择图片：</span>\n                      <div class="btn btn-primary btn-addon fileinput-button">\n                          图片上传\n                          <input id="fileuploadjumpAd" class="selectfiles" type="file" name="files[]" multiple="multiple">\n                      </div>\n                      <span class="size">（图片尺寸：750*1334）</span>\n                      <p style="margin-top:10px;">图片链接：<input type="url" id="jumpAdImgHref" name="jumpAdImgHref" value="" class="jumpAdImgHref AdHref"  placeholder="可为空,表示无链接"></p>\n                      <p style="margin-top:10px;">跳转链接：<input type="url" id="jumpHref" name="jumpHref" value="" class="jumpHref AdHref"  placeholder="不可为空"></p>\n                      <div class="jumpAdImg"></div>\n                  </div>\n                  <div class="Imglocation"><img src="adsys/images/jumpAdImg.png"></div>\n                </li>\n                \x3c!--js广告--\x3e\n                <li class="JsAd ad_editMain" data-adtype="107">\n                  <p class="txt">广告代码JS：（配置JS前，请与开发确认，保证该JS有效性）</p>\n                  <textarea placeholder="请输入js代码" class="jsTxt"></textarea>\n                </li>\n              </ul>\n            </div>\n            \x3c!--<div class="J_saveSC">保存并下一步</div>--\x3e\n          </div>\n        </div>\n        \x3c!--投放规则--\x3e\n        <div class="rule">\n          <div class="main">\n            <div class="adinfo">\n              <p style="font-size:14px;color:#000;font-weight:bold">备注广告信息</p>\n              <ul>\n                <li>\n                  <label>广告主：</label>\n                  <input name="adMaster" type="txt" class="adMaster" maxlength="30" placeholder="请填写（不超过30字符）" onfocus="this.placeholder=\'\'" onblur="this.placeholder=\'请填写（不超过30字符）\'"/>\n                </li>\n                <li>\n                  <label>广告名称：</label>\n                  <input name="adName" type="txt" class="adName" maxlength="30" placeholder="请填写（不超过30字符）" onfocus="this.placeholder=\'\'" onblur="this.placeholder=\'请填写（不超过30字符）\'"/>\n                </li>\n              </ul>\n            </div>\n            <div class="putRule">\n            <p style="font-size:14px;color:#000;font-weight:bold;margin-bottom:20px">投放规则</p>\n            <table>\n            <tbody>\n            <tr>\n              <td>投放日期：</td>\n              <td>\n              <input size="16" type="text" id="datetimeStart" readonly class="form_datetime"> - <input size="16" type="text" id="datetimeEnd" readonly class="form_datetime">\n              </td>\n            </tr>\n            <tr>\n              <td>投放范围：</td>\n              <td>\n                <ul class=\'clearfix\'>\n                  <li class="putAreaLi">\n                    <img src="adsys/images/check.png" style="width:26px;display:none;" class="checkpng agentCheckPng"/>\n                    \x3c!--<input type="checkbox" name="putArea" id="agent">--\x3e\n                    <label for="agent" id="agentShop">代理商店铺</label>\n                  </li>\n                  <li class="putAreaLi">\n                    <img src="adsys/images/check.png" style="width:26px;display:none;" class="checkpng ShopCheckPng"/>\n                    \x3c!--<input type="checkbox" name="putArea" id="appointShop">--\x3e\n                    <label for="appointSho" id=\'appointShop\'>指定店铺</label>\n                  </li>\n                  \x3c!--<li class="putAreaLi">\n                    <input type="checkbox" name="putArea" id="condition">\n                    <label for="condition">条件店铺</label>\n                  </li>--\x3e\n                  <span style="color:red;font-size:14px;display:inline-block;line-height: 35px;">温馨提示：多个范围设置后共同生效。</span>\n                </ul>\n              </td>\n            </tr>\n            <tr class=\'agent\'>\n              <td>代理商选择：</td>\n              <td>\n                <div class="addAgent grayBtn">添加代理商</div>\n                <div class="editAgent grayBtn">编辑代理商</div>\n              </td>\n            </tr>\n            <tr class=\'agent\'>\n              <td>例外店铺：</td>\n              <td>\n                <div class="addShop grayBtn">添加店铺</div>\n                <div class="editShop grayBtn">编辑店铺</div>\n              </td>\n            </tr>\n            <tr class="appointShop" style="display:none;">\n              <td>店铺选择：</td>\n              <td>\n                <div class="appointAddShop grayBtn">添加店铺</div>\n                <div class="appointEditShop grayBtn">编辑店铺</div>\n              </td>\n            </tr>\n            <tr class=\'adPutNum\'>\n              <td>投放次数：</td>\n              <td>\n                <select name="status" class="form-control select putNumSelect">\n                  <option value="1">不限次数</option>\n                  <option value="2">自定义</option>\n                </select>\n                <input type=\'text\' class="releaseSum" style="display:none" maxlength="8" value="" placeholder="请输入大于0的整数" onfocus="this.placeholder=\'\'" onblur="this.placeholder=\'请输入大于0的整数\'">\n              </td>\n            </tr>\n            <tr class=\'adPutSort\'>\n              <td>优先排序：</td>\n              <td>\n                <select name="sort" class="form-control select sortsSelect">\n                  <option value="">请选择</option>\n                  <option value="1">1</option>\n                  <option value="2">2</option>\n                  <option value="3">3</option>\n                  <option value="4">4</option>\n                  <option value="5">5</option>\n                </select>\n              </td>\n            </tr>\n            </tbody>\n            </table>\n            </div>\n            <div class="J_submit">提交</div>\n          </div>\n        </div>\n      </div>\n    </div>\n'},S="",M=new RegExp("((http|https)://)(([a-zA-Z0-9._-]+.[a-zA-Z]{2,6})|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,4})*(/[a-zA-Z0-9&%_./-~-]*)?");let C={init(){$(".app").append($(I())),this.getQueryString(),this.adChoise(),this.addAgent(),this.editAgent(),this.addShop(),this.editShop(),this.addAppointShop(),this.editAppointShop(),this.J_submit(),this.J_back(),this.setDate(),this.agentCheck(),this.putNumSelect(),this.regExp(),this.AdHref(),this.funcHref(),this.jumpHref(),this.imgsizeCheck(),this.btnIsshowCheck(),this.ImgFileUp()},getQueryString(){var t=window.location.hash,e=new Object;if(-1!=t.indexOf("?")){var a=t.substr(1);if(-1!=t.indexOf("&"))for(var n=a.split("?")[1].split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=n[i].split("=")[1];else{var l=a.split("?")[1];e[l.split("=")[0]]=l.split("=")[1]}}x=e.adId?e.adId:"",console.log(x),k=e.rangeType,T=e.editAd,C.createPage(x)},createPage(t){var e={adId:t};$.ajax({type:"get",url:"/rest/ad/put/createPage",dataType:"json",data:e,success:function(e){if("0002005"!=e.code){if(e.success){var a=e.data;if(A=a.adMaterial.id,y=a.adOrder.id,w=a.adOrder.orderId,a.adMaterial&&a.adOrder&&""!=t){switch(k){case 1:case"1":$(".agentCheckPng").show(),$(".appointShop").hide(),$(".agent").show();break;case 2:case"2":$(".ShopCheckPng").show();$(".appointShop").show(),$(".agent").hide();break;case 3:case"3":$(".agentCheckPng").show(),$(".ShopCheckPng").show()}"107"==a.adMaterial.type||107==a.adMaterial.type?($("#jsad").attr("checked",!0),$("input[name='adradio']").not("#jsad").parent().remove(),$(".adPutNum,.adPutSort").hide(),$(".JsAd").find(".jsTxt").val(a.adMaterial.jsCode).attr("disabled","disabled"),$(".adMaster").val(a.adOrder.ownerName).attr("disabled","disabled"),$(".adName").val(a.adOrder.name).attr("disabled","disabled"),$("#datetimeStart").val(a.adOrder.startTime.split(" ")[0]).attr("disabled","disabled"),$("#datetimeEnd").val(a.adOrder.endTime.split(" ")[0]).attr("disabled","disabled")):("100"!=a.adMaterial.type&&100!=a.adMaterial.type||($("#fullbg").attr("checked",!0),$("input[name='adradio']").not("#fullbg").parent().remove(),$(".funllbgHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".bgImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),"101"!=a.adMaterial.type&&101!=a.adMaterial.type||($("#banner").attr("checked",!0),$("input[name='adradio']").not("#banner").parent().remove(),$(".bannerHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".BannerImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),"102"!=a.adMaterial.type&&102!=a.adMaterial.type||($("#bombAd").attr("checked",!0),$("input[name='adradio']").not("#bombAd").parent().remove(),$(".bombAdHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".bombAdImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),"103"!=a.adMaterial.type&&103!=a.adMaterial.type||($("#func").attr("checked",!0),$("input[name='adradio']").not("#func").parent().remove(),$(".funcHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".funcImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),"104"!=a.adMaterial.type&&104!=a.adMaterial.type||($("#info").attr("checked",!0),$("input[name='adradio']").not("#info").parent().remove(),$(".infoHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".imgsize").find("input[value='"+JSON.parse(a.adMaterial.jsCode).imgStyle+"']").attr("checked",!0),"1"==JSON.parse(a.adMaterial.jsCode).imgStyle?$(".infoImgsmall").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>"):$(".infoImgbig").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>"),$("#infoTitle").val(JSON.parse(a.adMaterial.jsCode).imgTitle),$("#Introduce").val(JSON.parse(a.adMaterial.jsCode).imgIntroduction),$("#infoAddress").val(JSON.parse(a.adMaterial.jsCode).address),$("#BtnTxt").val(JSON.parse(a.adMaterial.jsCode).buttonText),$(".isShowBtn").find("input[value='"+JSON.parse(a.adMaterial.jsCode).isButtonShow+"']").attr("checked",!0)),"105"!=a.adMaterial.type&&105!=a.adMaterial.type||($("#fullAd").attr("checked",!0),$("input[name='adradio']").not("#fullAd").parent().remove(),$(".fullAdHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".fullAdImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),"106"!=a.adMaterial.type&&106!=a.adMaterial.type||($("#jumpAd").attr("checked",!0),$("input[name='adradio']").not("#jumpAd").parent().remove(),$(".jumpAdImgHref").val(a.adMaterial.imgLink).attr("disabled","disabled"),$(".jumpHref").val(a.adMaterial.jumpUrl).attr("disabled","disabled"),$(".jumpAdImg").append("<img src='"+a.adMaterial.url+"' data-imgType='"+a.adMaterial.format+"'>")),$(".selectfiles").attr("disabled","disabled"),$(".btn-primary").css({background:"#ccc","border-color":"#999"}),$(".btn-primary").mouseover(function(){$(this).css({background:"#ccc","border-color":"#999"})}),$(".adMaster").val(a.adOrder.ownerName).attr("disabled","disabled"),$(".adName").val(a.adOrder.name).attr("disabled","disabled"),$("#datetimeStart").val(a.adOrder.startTime.split(" ")[0]),$("#datetimeEnd").val(a.adOrder.endTime.split(" ")[0]),a.adOrder.releaseSum?($(".putNumSelect").val("2"),$(".releaseSum").val(a.adOrder.releaseSum).show()):$(".putNumSelect"),$(".sortsSelect").val(a.adOrder.sort),T&&($(".form_datetime").attr("disabled","disabled"),$(".putNumSelect").attr("disabled","disabled"),$(".releaseSum").attr("disabled","disabled"),$(".sortsSelect").attr("disabled","disabled")))}}else alert(e.msg);$(".sucaiTab li").hide(),$(".ad_editMain[data-adtype='"+$("input[name='adradio']:checked").attr("value")+"']").show(),layer.close(void 0),$(".createTmpl").show()}else{var n=window.location.host;window.location.href="http://"+n+"/view/login.html"}}})},setDate(){$(".form_datetime").datetimepicker({format:"yyyy-mm-dd",minView:"month",language:"cn",startDate:new Date,autoclose:!0}).on("changeDate",function(t){new Date($("#datetimeStart").val())>new Date($("#datetimeEnd").val())&&(alert("结束日期不能小于开始日期"),$(this).val(""))})},adChoise(){$("input[name='adradio']").click(function(){var t=$(this).attr("value");$(".sucaiTab li").hide(),$(".ad_editMain[data-adtype='"+t+"']").show(),"107"!=t||107!=t?($(".adPutNum").show(),$(".adPutSort").show()):($(".adPutNum").hide(),$(".adPutSort").hide())})},addAgent(){$(".addAgent").click(function(){history.pushState({},null,"main.html#agent?toAgent=1&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),c.init()})},editAgent(){$(".editAgent").click(function(){history.pushState({},null,"main.html#agent?toAgent=2&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),c.init()})},addShop(){$(".addShop").click(function(){history.pushState({},null,"main.html#shop?toShop=1&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),b.init()})},editShop(){$(".editShop").click(function(){history.pushState({},null,"main.html#shop?toShop=2&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),b.init()})},addAppointShop(){$(".appointAddShop").click(function(){history.pushState({},null,"main.html#shop?toShop=3&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),b.init()})},editAppointShop(){$(".appointEditShop").click(function(){history.pushState({},null,"main.html#shop?toShop=4&adId="+y+"&adType="+$("input[name='adradio']:checked").val()),$(".createTmpl").hide(),$(".agentTmpl").remove(),$(".shopTmpl").remove(),b.init()})},J_submit(){$(".J_submit").click(function(){switch($(".ad_editMain:visible").attr("data-adtype")){case 100:case"100":if(0==$(".bgImg").find("img").length)return void C.layerMsg("请先完善广告素材");break;case 101:case"101":if(0==$(".BannerImg").find("img").length)return void C.layerMsg("请先完善广告素材");break;case 102:case"102":if(0==$(".bombAdImg").find("img").length)return void C.layerMsg("请先完善广告素材");break;case 103:case"103":if(0==$(".funcImg").find("img").length)return void C.layerMsg("请先完善广告素材");$("#funcHref").blur();break;case 104:case"104":if(1==$("input[name='imgsize']:checked").val()&&0==$(".infoImgsmall").find("img").length)return void C.layerMsg("请先完善广告素材");if(2==$("input[name='imgsize']:checked").val()&&0==$(".infoImgbig").find("img").length)return void C.layerMsg("请先完善广告素材");$("#infoTitle").blur(),$("#BtnTxt").blur(),"1"==$("input[name='infoisShow']:checked").val()&&0==$("#BtnTxt").val().length?($("#BtnTxt").parent().find(".error").remove(),$("#BtnTxt").parent().append('<label  generated="true" class="error" style="display: inline;">必填项</label>')):$("#BtnTxt").parent().find(".error").remove(),$("#infoHref").blur();break;case 105:case"105":if(0==$(".fullAdImg").find("img").length)return void C.layerMsg("请先完善广告素材");break;case 106:case"106":if(0==$(".jumpAdImg").find("img").length)return void C.layerMsg("请先完善广告素材");$("#jumpHref").blur();break;case 107:case"107":if(0==$(".jsTxt").val().length)return void C.layerMsg("请先完善广告素材")}if($(".ad_editMain:visible").find(".error").length>0)C.layerMsg("信息有误");else if($(".adMaster").val().length<=0)C.layerMsg("请填写广告主");else if($(".adName").val().length<=0)C.layerMsg("请填写广告名称");else if($(".adName").val().length<=0)C.layerMsg("请填写广告名称");else if($("#datetimeStart").val().length<=0||$("#datetimeEnd").val().length<=0)C.layerMsg("还未选择投放日期");else if($("#datetimeStart").val().length<=0||$("#datetimeEnd").val().length<=0)C.layerMsg("还未选择投放日期");else{if("107"!=$("input[name='adradio']:checked").val()||107!=$("input[name='adradio']:checked").val()){if(2==$(".putNumSelect").val()&&$(".releaseSum").val().length<=0)return void C.layerMsg("请填写投放次数");if(""==$(".sortsSelect").val())return void C.layerMsg("请选择排序")}for(var t=!1,e=0;e<$(".checkpng").length;e++)$(".checkpng").eq(e).is(":visible")&&(t=!0);if(t){var a=(new Date).getFullYear()+"-"+((new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"-"+((new Date).getDate()>9?(new Date).getDate():"0"+(new Date).getDate()),n=$("#datetimeEnd").val();new Date(n.replace("-","/").replace("-","/"))<new Date(a.replace("-","/").replace("-","/"))?C.layerMsg("投放已过期，请重新选择日期"):C.require()}else C.layerMsg("请选择投放范围")}})},require(){let t=$(".rule .adMaster").val(),e=$(".rule .adName").val(),a=$("#datetimeStart").val(),n=$("#datetimeEnd").val(),i=$(".sortsSelect").val();var l;switch($(".releaseSum").val().length>0&&!$(".releaseSum").is(":hidden")&&(S=$(".releaseSum").val()),$(".ad_editMain:visible").attr("data-adtype")){case 100:case"100":l={format:$(".bgImg").find("img").attr("data-imgType"),id:A,size:"750*1334",type:$("input[name='adradio']:checked").val(),url:$(".bgImg").find("img").attr("src")};break;case 101:case"101":l={format:$(".BannerImg").find("img").attr("data-imgType"),id:A,imgLink:$(".bannerHref").val(),size:"750*230",type:$("input[name='adradio']:checked").val(),url:$(".BannerImg").find("img").attr("src")};break;case 102:case"102":l={format:$(".bombAdImg").find("img").attr("data-imgType"),id:A,imgLink:$(".bombAdHref").val(),size:"600*750",type:$("input[name='adradio']:checked").val(),url:$(".bombAdImg").find("img").attr("src")};break;case 103:case"103":l={format:$(".funcImg").find("img").attr("data-imgType"),id:A,imgLink:$(".funcHref").val(),size:"347*146",type:$("input[name='adradio']:checked").val(),url:$(".funcImg").find("img").attr("src")};break;case 104:case"104":var s,d;1==$("input[name='imgsize']:checked").val()&&(s="96*96",d=$(".infoImgsmall").find("img").attr("src")),2==$("input[name='imgsize']:checked").val()&&(s="690*230",d=$(".infoImgbig").find("img").attr("src")),l={format:$(".infoImg").find("img").attr("data-imgType"),id:A,json:infoJson,imgLink:$(".infoHref").val(),size:s,type:$("input[name='adradio']:checked").val(),url:d,address:$("#infoAddress").val(),btnShow:$('input[name="infoisShow"]:checked').val(),btnText:$("#BtnTxt").val(),introduction:$("#Introduce").val(),title:$("#infoTitle").val()};break;case 105:case"105":l={format:$(".fullAdImg").find("img").attr("data-imgType"),id:A,imgLink:$(".fullAdHref").val(),size:"750*1334",type:$("input[name='adradio']:checked").val(),url:$(".fullAdImg").find("img").attr("src")};break;case 106:case"106":l={format:$(".jumpAdImg").find("img").attr("data-imgType"),id:A,imgLink:$(".jumpAdImgHref").val(),size:"750*1334",type:$("input[name='adradio']:checked").val(),url:$(".jumpAdImg").find("img").attr("src"),jumpUrl:$("#jumpHref").val()};break;case 107:case"107":l={id:A,jsCode:$(".jsTxt").val(),type:$("input[name='adradio']:checked").val()}}var o={adMaterial:l,adOrder:{description:"",endTime:n,id:y,name:e,orderId:w,ownerName:t,releaseSum:S,releaseUser:$(".username").text(),sort:i,startTime:a,status:"0"}};$.ajax({type:"post",url:"/rest/ad/put/save",contentType:"application/json",data:JSON.stringify(o),success:function(t){if("0002005"!=t.code)if(t.success){sessionStorage.removeItem("isNew"),sessionStorage.removeItem("adId");e=window.location.host;window.location.href="http://"+e+"/view/main.html#adList"}else alert(t.msg);else{var e=window.location.host;window.location.href="http://"+e+"/view/login.html"}}})},J_back(){$(".J_back").click(function(){var t=window.location.host;window.location.href="http://"+t+"/view/main.html#adList"})},agentCheck(){$(".putAreaLi #agentShop").click(function(){$("tr.appointShop").hide(),$("tr.agent").show()}),$(".putAreaLi #appointShop").click(function(){$("tr.appointShop").show(),$("tr.agent").hide()})},putNumSelect(){$(".putNumSelect").click(function(){2==$(this).val()?$(".releaseSum").show():$(".releaseSum").hide()})},regExp(){$(document).on({keyup:function(){/^[1-9]\d*$/.exec($(this).val())||$(this).val("")}},".releaseSum")},AdHref(){$(".AdHref").keyup(function(){$(this).parent().find(".error").remove(),M.test($(this).val())||0==$(this).val().length||$(this).parent().append('<label for="bannerHref1" generated="true" class="error" style="display: inline;">请输入合法的网址</label>')})},ImgFileUp(){var t,e;if("api.adsys.witown.cn"==window.location.host)var a="http://kunlun.treebear.cn/resource/upload.do";else a="http://test.kunlun.treebear.cn/resource/upload.do";$(".selectfiles").fileupload({url:a,dataType:"json",disabled:!1,autoUpload:!0,acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,maxNumberOfFiles:1,add:function(a,n){e=layer.load(0,{shade:!1});n.fileInput[0].value,n.originalFiles[0].name;var i=n.originalFiles[0].size/1024,l="jpeg"==n.files[0].type.split("/")[1]?"jpg":n.files[0].type.spli("/")[1];if(t="jpg"==l?1:2,i>200)return C.layerMsg("图片大小不能超过200KB"),void layer.close(e);n.submit().success(function(a,n,i){var l,s,d=new Image;d.src=a.imgUrl,d.onload=function(){switch(l=d.width,s=d.height,$(".ad_editMain:visible").attr("data-adtype")){case 100:case"100":if(750!=l||1334!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".bgImg").empty(),$(".bgImg").append("<img src='"+a.imgUrl+"' data-imgType='"+t+"'>");break;case 101:case"101":if(750!=l||230!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".BannerImg").empty(),$(".BannerImg").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>");break;case 102:case"102":if(600!=l||750!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".bombAdImg").empty(),$(".bombAdImg").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>");break;case 103:case"103":if(347!=l||146!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".funcImg").empty(),$(".funcImg").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>");break;case 104:case"104":if("1"==$("input[name='imgsize']:checked").val()){if(96!=l||96!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".infoImgsmall").empty(),$(".infoImgsmall").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>")}if("2"==$("input[name='imgsize']:checked").val()){if(690!=l||230!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".infoImgbig").empty(),$(".infoImgbig").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>")}break;case 105:case"105":if(750!=l||1334!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".fullAdImg").empty(),$(".fullAdImg").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>");break;case 106:case"106":if(750!=l||1334!=s)return C.layerMsg("图片尺寸不对"),void layer.close(e);layer.close(e),$(".jumpAdImg").empty(),$(".jumpAdImg").append("<img src='"+a.imgUrl+"'  data-imgType='"+t+"'>")}}}).error(function(t,a,n){layer.close(e),C.layerMsg("上传出错了，稍后重试")})},done:function(t,a){layer.close(e)}})},imgsizeCheck(){$("input[name='imgsize']").click(function(){"1"==$("input[name='imgsize']:checked").val()&&($(".infoImgbig").hide(),$(".infoImgsmall").show()),"2"==$("input[name='imgsize']:checked").val()&&($(".infoImgbig").show(),$(".infoImgsmall").hide())})},btnIsshowCheck(){$("#infoTitle").blur(function(){0==$("#infoTitle").val().length?($("#infoTitle").parent().find(".error").remove(),$("#infoTitle").parent().append('<label for="infoTitle" generated="true" class="error" style="display: inline;">必填项</label>')):$("#infoTitle").parent().find(".error").remove()}),$("#infoHref").blur(function(){0==$("#infoHref").val().length?($("#infoHref").parent().find(".error").remove(),$("#infoHref").parent().append('<label for="infoHref" generated="true" class="error" style="display: inline;">必填项</label>')):0==$("#infoHref").parent().find(".error").length&&$("#infoHref").parent().find(".error").remove()}),$("#BtnTxt").blur(function(){0==$(this).val().length&&"1"==$("input[name='infoisShow']:checked").val()?0==$("#BtnTxt").val().length?($("#BtnTxt").parent().find(".error").remove(),$("#BtnTxt").parent().append('<label  generated="true" class="error" style="display: inline;">必填项</label>')):$("#BtnTxt").parent().find(".error").remove():$(this).parent().find(".error").remove()}),$("input[name='infoisShow']").click(function(){"1"==$("input[name='infoisShow']:checked").val()&&0==$("#BtnTxt").val().length?($("#BtnTxt").parent().find(".error").remove(),$("#BtnTxt").parent().append('<label  generated="true" class="error" style="display: inline;">必填项</label>')):$("#BtnTxt").parent().find(".error").remove()})},funcHref(){$("#funcHref").blur(function(){0==$("#funcHref").val().length?($("#funcHref").parent().find(".error").remove(),$("#funcHref").parent().append('<label  generated="true" class="error" style="display: inline;">必填项</label>')):$("#funcHref").parent().find(".error").remove()})},jumpHref(){$("#jumpHref").blur(function(){0==$("#jumpHref").val().length?($("#jumpHref").parent().find(".error").remove(),$("#jumpHref").parent().append('<label  generated="true" class="error" style="display: inline;">必填项</label>')):$("#jumpHref").parent().find(".error").remove()})},layerMsg(t){layer.open({type:"msg",offset:"rb",content:'<p style="text-align:center;padding:20px 80px">'+t+"</p>",shade:0,time:2e3})}};var P=C,B=function(){console.log("area")},N=function(){return'\n\t\t<div class="app-main-content">\n\t\t\t<div class="app-content-top">\n\t\t\t\t<p><span><img src="adsys/images/left_icon.png">广告投放</span></p>\n\t\t\t</div>\n\t\t\t<div class="app-content">\n\t\t\t\t<div class="tabname">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>广告投放</li>\n\t\t\t\t\t\t<div class="craeteAd">创建广告</div>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="tab">\n\t\t\t\t\t<form class="findCondition">\n\t\t\t\t\t\t<ul class="form-inline">\n\t\t\t\t\t\t\t<li class="w200">\n\t\t\t\t\t\t\t\t<label>广告主</label>\n\t\t\t\t\t\t\t\t<input name="advertiser" type="text" class="form-control w119 ownerName" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>广告名称</label>\n\t\t\t\t\t\t\t\t<input name="adsname" type="text" class="form-control w119 adsname" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>投放人</label>\n\t\t\t\t\t\t\t\t<input name="putpeople" type="text" class="form-control w119 releaseUser" />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>广告位</label>\n\t\t\t\t\t\t\t\t<select name="location" class="form-control select w105 adTypeSelect">\n\t\t\t\t\t\t\t\t\t<option value="">全部</option>\n\t\t\t\t\t\t\t\t\t<option value="100">全屏背景图</option>\n\t\t\t\t\t\t\t\t\t<option value="101">主页banner</option>\n\t\t\t\t\t\t\t\t\t<option value="102">弹屏广告</option>\n\t\t\t\t\t\t\t\t\t<option value="103">功能区</option>\n\t\t\t\t\t\t\t\t\t<option value="104">信息流</option>\n\t\t\t\t\t\t\t\t\t<option value="105">全屏轮播广告</option>\n\t\t\t\t\t\t\t\t\t<option value="106">全屏自动跳转广告</option>\n\t\t\t\t\t\t\t\t\t<option value="107">悬浮广告</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>状态</label>\n\t\t\t\t\t\t\t\t<select name="status" class="form-control select w105 status">\n\t\t\t\t\t\t\t\t\t<option value="1">投放中</option>\n\t\t\t\t\t\t\t\t\t<option value="0">待投放</option>\n\t\t\t\t\t\t\t\t\t<option value="2">结束</option>\n\t\t\t\t\t\t\t\t\t<option value="">全部</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<label>投放范围</label>\n\t\t\t\t\t\t\t\t<select name="area" class="form-control select w105 rangeType">\n\t\t\t\t\t\t\t\t\t<option value="">全部</option>\n\t\t\t\t\t\t\t\t\t<option value="1">指定代理商</option>\n\t\t\t\t\t\t\t\t\t<option value="2">指定店铺</option>\n\t\t\t\t\t\t\t\t\t<option value="3">组合店铺</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li style=\'float:right;margin-bottom:0px;margin-right:0px;\'>\n\t\t\t\t\t\t\t\t<span class="btn btn-blue J-searchAdlist">搜索</span>\n\t\t\t\t\t\t\t\t<span class="btn btn-blue J-export">导出Excel</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<div class="delist">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>广告主</th>\n\t\t\t\t\t\t\t\t<th>广告名称</th>\n\t\t\t\t\t\t\t\t<th>投放人</th>\n\t\t\t\t\t\t\t\t<th>广告位</th>\n\t\t\t\t\t\t\t\t<th>状态</th>\n\t\t\t\t\t\t\t\t<th>开始时间</th>\n\t\t\t\t\t\t\t\t<th>结束时间</th>\n\t\t\t\t\t\t\t\t<th>投放范围</th>\n\t\t\t\t\t\t\t\t<th>PV</th>\n\t\t\t\t\t\t\t\t<th>UV</th>\n\t\t\t\t\t\t\t\t<th>点击数</th>\n\t\t\t\t\t\t\t\t<th>操作</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody class="J-AdList">\n\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t\x3c!--分页--\x3e\n\t\t\t\t<div class="tcdPageCode_box">\n\t\t\t\t\t<div class="tcdPageCode_main">\n\t\t\t\t\t\t<span class="pageCount">\n\t\t\t\t\t\t\t<select class="pageSize allPageSize">\n\t\t\t\t\t\t\t\t<option selected="selected" value="15">15</option>\n\t\t\t\t\t\t\t\t<option value="50">50</option>\n\t\t\t\t\t\t\t\t<option value="100">100</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="tcdPageCode allPageCode"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};n();let j={init(){$(".app").append($(N())),this.request(15,1),this.search(),this.exports(),this.changePage(),this.craeteAd(),this.showArea()},page(t,e,a){if(e)e=e;else e=15;$(".tcdPageCode").createPage({pageCount:Math.ceil(t/e),current:a,backFn:function(t){j.request(e,t)}})},changePage(){$(".pageSize").change(function(){var t=$(this).val();j.request(t,1)})},craeteAd(){$(".craeteAd").click(function(){history.pushState({},null,"main.html#create?isNew=1"),$(".app-main-content").remove(),P.init()})},createRalodPage(t){$(".tcdPageCode").createRalodPage({pageCount:t,current:1,backFn:function(t){alert("a"+t)}})},formatDate(t){let e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),i=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[i,a,n].join("-")},showArea(){$(document).off("click").on("click",".showArea",function(){history.pushState({},null,"main.html#area?adId="+$(this).attr("data-adId")+"&adType="+$(this).attr("data-type")),$(".app-main-content").remove(),B()})},switchAd(t){var e=$(t).attr("data-enable");if("1"==e||1==e)var a="是否确认再次投放此广告？",n="/rest/ad/put/switchIportalAd";else if("107"==$(t).attr("data-adType")||107==$(t).attr("data-adType"))a="悬浮广告停用后不可恢复，请确认是否停用?",n="/rest/ad/put/switchJsAd";else a="是否确认停用此广告？",n="/rest/ad/put/switchIportalAd";var i=new Object;i.enable=$(t).attr("data-enable"),i.id=$(t).attr("data-adId"),confirm(a)&&$.ajax({type:"get",url:n,dateType:"json",data:i,success(t){if("0002005"!=t.code)t.success&&j.request(15,1);else{var e=window.location.host;window.location.href="http://"+e+"/view/login.html"}}})},search(){$(".J-searchAdlist").click(function(){j.request(15,1)})},exports(){$(".J-export").click(function(){})},request(t,e){var a=new Object;a.pageNo=e,a.pageSize=t,$(".adsname").val()&&(a.name=$(".adsname").val()),$(".ownerName").val()&&(a.ownerName=$(".ownerName").val()),$(".releaseUser").val()&&(a.releaseUser=$(".releaseUser").val()),$(".adTypeSelect").val()&&(a.adType=$(".adTypeSelect").val()),$(".status").val()&&(a.status=$(".status").val()),$(".rangeType").val()&&(a.rangeType=$(".rangeType").val()),$.ajax({type:"post",url:"/rest/ad/put/queryAdorders",contentType:"application/json",data:JSON.stringify(a),success(a){if("0002005"!=a.code)if(a.success){var n=a.data,i="",l=a.count;j.page(l,t,e),$.each(n,(t,e)=>{switch(e.status){case 1:case"1":var a="<span>投放中</span>";l='<span class="view">预览</span><span class="copy">复制</span><span class="onSwitch" data-enable="0" data-adId="'+e.id+'" data-adType="'+e.adType+'">停用</span>';break;case 0:case"0":a="<span>待投放</span>";l="";break;case 2:case"2":a='<span class="statusEnd">结束</span>';l='<span class="view">预览</span><span class="copy">复制</span><span class="onSwitch" data-enable="1" data-adId="'+e.id+'">再次投放</span>';break;default:a="";l=""}if("107"==e.adType||107==e.adType){var n="悬浮广告";if(2==e.status||"2"==e.status)var l='<span class="stop">已停用</span>';else l='<span class="edit" data-adId="'+e.id+'" data-rangeType="'+e.rangeType+'">编辑</span><span class="onSwitch" data-enable="0" data-adId="'+e.id+'" data-adType="'+e.adType+'">停用</span>'}else if(2==e.status||"2"==e.status)l='<span class="putAgain" data-adId="'+e.id+'" data-rangeType="'+e.rangeType+'">再次投放</span>';else l='<span class="editAd" data-adId="'+e.id+'" data-rangeType="'+e.rangeType+'">编辑</span><span class="onSwitch" data-enable="0" data-adId="'+e.id+'" data-adType="'+e.adType+'">停用</span>';switch(e.adType){case 100:case"100":n="全屏背景图";break;case 101:case"101":n="主页Banner";break;case 102:case"102":n="弹屏广告";break;case 103:case"103":n="功能区";break;case 104:case"104":n="信息流区";break;case 105:case"105":n="全屏轮播广告";break;case 106:case"106":n="全屏自动跳转广告";break;case 107:case"107":n="悬浮广告";break;default:n=""}switch(e.rangeType){case 1:case"1":var s="指定代理商";break;case 2:case"2":s="指定店铺";break;case 3:case"3":s="组合店铺";break;default:s=""}var d=e.ownerName?e.ownerName:"",o=e.name?e.name:"",r=e.releaseUser?e.releaseUser:"",c=e.startTime?e.startTime.split(" ")[0]:"",p=e.endTime?e.endTime.split(" ")[0]:"",u=e.id?e.id:"",h=e.adType?e.adType:"";i+=`<tr>\n\t\t\t\t\t\t\t<td style="max-width: 200px;">${d}</td>\n\t\t\t\t\t\t\t<td style="max-width: 200px;">${o}</td>\n\t\t\t\t\t\t\t<td>${r}</td>\n\t\t\t\t\t\t\t<td>${n}</td>\n\t\t\t\t\t\t\t<td>${a}</td>\n\n\t\t\t\t\t\t\t<td>${c}</td>\n\t\t\t\t\t\t\t<td>${p}</td>\n\t\t\t\t\t\t\t<td class="showArea" data-adId='${u}' data-type='${h}'>${s}</td>\n\t\t\t\t\t\t\t<td>/</td>\n\t\t\t\t\t\t\t<td>/</td>\n\t\t\t\t\t\t\t<td>/</td>\n\t\t\t\t\t\t\t<td class='handle'>${l}</td>\n\t\t\t\t\t\t</tr>`}),$(".J-AdList").html(i),$(".shopTmpl").find("input[name='checkbox_router']:checked").length==$(".shopTmpl").find("input[name='checkbox_router']").length?$("#shop_leftCheck").prop("checked",!0):$("#shop_leftCheck").prop("checked",!1),$(".onSwitch").click(function(){j.switchAd(this)}),$(".edit,.putAgain").click(function(){history.pushState({},null,"main.html#create?adId="+$(this).attr("data-adId")+"&rangeType="+$(this).attr("data-rangeType")),$(".app-main-content").remove(),P.init()}),$(".editAd").click(function(){history.pushState({},null,"main.html#create?adId="+$(this).attr("data-adId")+"&rangeType="+$(this).attr("data-rangeType")+"&editAd=1"),$(".app-main-content").remove(),P.init()})}else alert(a.msg);else{var s=window.location.host;window.location.href="http://"+s+"/view/login.html"}}})}};var D=j;var L=function(){return'\n        <div class="app-main-content">\n            <div class="app-content countTmp">\n              <div class="tabname">\n                <ul>\n                  <li>结算管理</li>\n                </ul>\n              </div>\n              <div class="tab">\n                <form class="findCondition">\n                  <ul class="form-inline">\n                    <li class="w200">\n                      <label>代理商名称</label>\n                      <input name="agentName" type="text" class="form-control w105" />\n                    </li>\n                    <li>\n                      <label>提现单号</label>\n                      <input name="applyNo" type="text" class="form-control w105" />\n                    </li>\n                    <li>\n                      <label>状态</label>\n                      <select name="status" class="form-control select w105">\n                        <option value="1">已提交</option>\n                        <option value="2">已结算</option>\n                      </select>\n                    </li>\n                    <li>\n                      <label>日期</label>\n                      <input type="text" class="w105 date" value="" name="endTime"> - <input type="text" class="w105 date" value="" name="startTime">\n                    </li>\n                    <li>\n                      <span class="btn btn-blue J-search">搜索</span>\n                    </li>\n                    <li>\n                      <span class="btn btn-blue J-export">导出Excel</span>\n                    </li>\n                  </ul>\n                </form>\n              </div>\n              <div class="delist">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>提现单号</th>\n                      <th>支付宝账号/银行卡号</th>\n                      <th>开户银行</th>\n                      <th>姓名</th>\n                      <th>提现金额</th>\n                      <th>支付金额</th>\n                      <th>发票状态</th>\n                      <th>代理商名称</th>\n                      <th>提现状态</th>\n                      <th>提现申请日期</th>\n                      <th>提现处理日期</th>\n                    </tr>\n                  </thead>\n                  <tbody class="J-countList">\n                  </tbody>\n                </table>\n              </div>\n              <div class="import">\n                <span class="btn btn-blue J_uploadAll">导入Excel批量处理结算状态</span>\n                <input id="fileupload" class="selectfiles" type="file" name="file" multiple="multiple">\n              </div>\n              \x3c!--分页--\x3e\n              <div class="tcdPageCode_box">\n                <div class="tcdPageCode_main">\n                  <span class="pageCount">\n                    <select class="count_pageSize allPageSize">\n                      <option selected="selected" value="15">15</option>\n                      <option value="50">50</option>\n                      <option value="100">100</option>\n                    </select>\n                  </span>\n                  <div class="count_tcdPageCode allPageCode"></div>\n                </div>\n              </div>\n            </div>\n        </div>\n  '};n();let Q="/rest/wechat/attractFans/get/settleApplyList",H={init(){$(".app").append($(L())),this.request(Q,{pageNo:1,pageSize:15,status:1},this.render,this._false),this.search(),this.changePage(),this.exports(),this.getTime(),this.uploadFile()},_false(t){alert(t.msg)},uploadFile(){$("#fileupload").fileupload({url:"/rest/wechat/attractFans/import/settleApplyExcel",dataType:"json",method:"post",disabled:!1,autoUpload:!0,acceptFileTypes:/(\.|\/)(csv|xls|xlsx)$/i,add:function(t,e){var a=/(\.|\/)(csv|xls|xlsx)$/;if(console.log(e),console.log(a,e.originalFiles[0].name),e.originalFiles[0].type.length&&!a.test(e.originalFiles[0].name))return layer.alert("上传文件格式错误！"),!1},done:function(t,e){console.log(e)}})},getTime(){$(".date").datetimepicker({language:"cn",format:"yyyy-mm-dd",minView:"month",initialDate:new Date,autoclose:!0,todayBtn:!0})},page(t,e,a){let n=this;if(e)e=e;else e=15;$(".count_tcdPageCode").createPage({pageCount:t,current:a,backFn:function(t){H.request(Q,{pageNo:t,pageSize:e},n.render,n._false)}})},changePage(){let t=this;$(".count_pageSize").change(function(){var e=$(this).val();H.request(Q,{pageNo:1,pageSize:e},t.render,t._false)})},formatDate(t){let e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),i=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[i,a,n].join("-")},render(t,e,a,n){let i="";$(".J-countList").html(""),t.data&&($.each(t.data,(t,a)=>{let n=1==a.hasInvoice?"有":"无",l="",s="/";a.payBank&&(s=a.payBank);let d=a.applyTime?e.formatDate(Number(a.applyTime)):"-",o=a.completeTime?e.formatDate(Number(a.completeTime)):"-";switch(a.status){case 1:case"1":l="已提交";break;case 2:case"2":l="已结算"}i+=`<tr>\n\t\t\t\t\t\t<td>${a.applyNo}</td>\n\t\t\t\t\t\t<td class='toolen' title='${a.payAccount}'>${a.payAccount}</td>\n\t\t\t\t\t\t<td class='toolen' title='${s}'>${s}</td>\n\t\t\t\t\t\t<td>${a.payName}</td>\n\t\t\t\t\t\t<td>${a.payAmountYuan}</td>\n\t\t\t\t\t\t<td>${a.paidAmountYuan}</td>\n\n\t\t\t\t\t\t<td>${n}</td>\n\t\t\t\t\t\t<td>${a.applyName}</td>\n\t\t\t\t\t\t<td>${l}</td>\n\t\t\t\t\t\t<td>${d}</td>\n\t\t\t\t\t\t<td>${o}</td>\n\t\t\t\t\t</tr>`}),$(".J-countList").html(i)),H.page(t.total,a,n)},search(){let t=this;$(".J-search").click(function(){var e=$(".findCondition").serialize();t.request(Q+"?pageNo=1&pageSize=10",e,t.render,t._false)})},exports(){$(".J-export").click(function(){$(".findCondition").attr("action","/export/settleApplyExcel"),$(".findCondition").submit()})},request(t,e,a,n){let i=this;$.ajax({type:"GET",url:t,dateType:"json",contentType:"application/json",data:e,success(t){if("0002005"!=t.code)t.success?a(t,i,e.pageSize,e.pageNo):n(t);else{var l=window.location.host;window.location.href="http://"+l+"/view/login.html"}}})}};var E=H,z=a(7),O=a.n(z),F=a(6),J=a.n(F),_=a(5),U=a.n(_),R=a(4),Y=a.n(R),Z=a(3),G=a.n(Z),V=a(2),W=a.n(V),q=a(1),K=a.n(q),X=a(0),tt=a.n(X);n();var et=new Object;et.currentPage=1,et.pageSize=15,et.flag=0;let at={init(t){et.flag=t,1==t&&(this.loadAgentData(15,1,0,1),this.popUpAddAgentPage(),this.openConfigAgentInfoPage(),this.openConfig2AgentInfoPage(),this.configAgentProfile()),2==t&&(this.loadAgentData(15,1,et.aid,2),this.popUpAddAgent2Page()),this.changePage(t),this.searchAgentList(t)},loadAgentData:function(t,e,a,n,i){et.pageSize=t,et.aid=a,et.currentPage=e;var l=K.a;2==n&&(l=tt.a),$.ajax({url:"/rest/wechat/config/getSelfOrChildAgentList",type:"get",data:{agentName:i,pAgentId:a,pageNo:e,pageSize:t},success(t){if(t.success){var a="",s=t.data;$.each(s,(t,e)=>{a+=U()(l).render(e)}),$("#wxConfigList").empty().append(a),1==n&&(at.configAgentProfile(),at.clickWxagent2Config_href()),2==n&&at.deleteAgent2Func(),at.page(i,t.count,et.pageSize,e,n)}else layer.alert(t.msg)},error(t){layer.alert("error"+t.responseText)}})},page(t,e,a,n,i){t=$("#search_agentName_input").val();if(a)a=a;else a=15;$(".count_tcdPageCode.allPageCode").createPage({pageCount:Math.ceil(e/a),current:n,backFn:function(e){et.currentPage=e,2==i&&at.loadAgentData(a,e,et.aid,i,t),1==i&&at.loadAgentData(a,e,0,i,t)}})},changePage(t){$(".count_pageSize.allPageSize").change(function(){var e=$(this).val();et.pageSize=e;var a=$("#search_agentName_input").val();2==t&&at.loadAgentData(e,1,et.aid,t,a),1==t&&at.loadAgentData(e,1,0,t,a)})},searchAgentList(t){$("#serchAgentBtn").on("click",function(){var e=$("#search_agentName_input").val();2==t&&at.loadAgentData(15,1,et.aid,t,e),1==t&&at.loadAgentData(15,1,0,t,e)})},popUpAddAgentPage:function(){$("#addLevel1AgentBtn").on("click",function(){layer.open({title:"添加一级代理商",type:1,area:["600px","300px"],shadeClose:!0,content:Y.a,success:function(){$("#submitAddLevelAgent").on("click",function(){var t=$("#agentName").val(),e=$("#agentPrice").val();at.addAgentInfo("0",t,e)}),$("#closeAddLevel1AgentPopPage").on("click",function(){layer.closeAll()})}})})},addAgentInfo:function(t,e,a,n){var i=new Object;i.agentName=e,i.pAgentId=t,null!=a&&(i.price=a),1!=n||at.checkPriceFormater(a)?$.ajax({url:"/rest/wechat/config/addSelfOrChildAgent",type:"POST",dataType:"json",data:i,success(e){if(e.success){layer.closeAll(),layer.msg("操作成功！");var a=t;1==n&&(a=0),at.loadAgentData(15,1,a,n)}else layer.alert(e.msg)},error(t){layer.alert("error"+t.responseText)}}):layer.msg("小数点后保留两位！",{time:1e3})},updateAgentInfo:function(t,e,a){at.checkPriceFormater(a)?$.ajax({url:"/rest/wechat/config/updateAgentXifenPrice",type:"POST",dataType:"json",data:{agentName:e,price:a,agentId:t},success(t){t.success?(layer.closeAll(),layer.msg("操作成功！")):layer.alert(t.msg)},error(t){layer.alert("error"+t.responseText)}}):layer.msg("小数点后保留两位！",{time:1e3})},configAgentProfile:function(){$(".btn.btn-blue.agentProfileConfBtn").on("click",function(){var t=$(this).attr("data"),e=($(this).attr("data-price"),$(this).attr("data-updateprice")),a=$(this).attr("data-maxXifenPriceYuan"),n=$(this).attr("data-isineffect");layer.open({title:"收益配置",type:1,area:["600px","300px"],shadeClose:!0,content:W.a,success:function(i,l){$("#config_agentId").val(t),$("#currentXifenPrice").text(e),$("#agentPrice").val(e),$("#maxXifenPriceYuan").val(a),$("#alertmsg").hide(),"false"==n&&$("#invalidTomorrow_lable").text("明日生效"),"true"==n&&$("#invalidTomorrow_lable").text()}}),$("#submitAddLevelAgent").on("click",function(){var t=$("#config_agentId").val(),a=$("#agentPrice").val();if(a==e)layer.msg("未调整金额！");else{if(!at.checkPriceFormater(a))return void layer.msg("小数点后保留两位！",{time:1e3});at.updateAgentInfo(t,"",a);var n=$("#search_agentName_input").val();at.loadAgentData(et.pageSize,et.currentPage,et.aid,flag,n)}}),$("#closeAddLevel1AgentPopPage").on("click",function(){layer.closeAll()}),$("#agentPrice").on("change",function(){$("#agentPrice").val()<$("#maxXifenPriceYuan").val()&&$("#alertmsg").show()})})},popUpAddAgent2Page:function(){$("#addLevel2AgentBtn").on("click",function(){layer.open({title:"添加二级代理商",type:1,area:["600px","250px"],shadeClose:!0,content:G.a,success:function(t,e){$("#config_agentId").val(et.aid)}}),$("#submitAddLevelAgent").on("click",function(){var t=$("#config_agentId").val(),e=$("#agentName").val();at.addAgentInfo(t,e,null,2)}),$("#closeAddLevel1AgentPopPage").on("click",function(){layer.closeAll()})})},deleteAgent2Func:function(){$(".btn.btn-blue.deleteAgent2").on("click",function(){var t=$(this).attr("data");layer.msg("确定要删除吗?",{time:0,btn:["确定","取消"],yes:function(e){$.ajax({url:"/rest/wechat/config/deleteChildAgent",type:"POST",dataType:"json",data:{agentId:t,pAgentId:et.aid},success(t){if(t.success){layer.closeAll(),layer.msg("操作成功！",{time:1e3});var e=$("#search_agentName_input").val();at.loadAgentData(et.pageSize,et.currentPage,et.aid,et.flag,e)}else layer.alert(t.msg)},error(t){layer.alert("error"+t.responseText)}})}})})},checkPriceFormater(t,e=2){if(""!=t.value){if(!/^[0-9]+\.?[0-9]*$/.test(t))return!1;if(t.indexOf(".")>-1&&t.split(".")[1].length>e)return!1}return!0},openConfigAgentInfoPage(){$("#configAgentInfo").click(function(){$(".app-main-content").remove(),wxconfig.init("1")})},openConfig2AgentInfoPage(){$("#configSecAgentInfo, #popupSecondAgentPage").click(function(){history.replaceState({},null,"main.html#wxagent2config"),history.go(0),$(".app-main-content").remove()})},clickWxagent2Config_href:function(){$(".btn.btn-blue.wxagent2Config_href").on("click",function(){et.aid=$(this).attr("data")})}};var nt=at;var it={init(t){"1"==t&&($(".app").append($(O.a)),nt.init(1)),"2"==t&&($(".app").append($(J.a)),nt.init(2))}};var lt=function(){return'\n\t\t<div class="app-aside bg-black">\n\t\t\t<div class="aside-wrap">\n\t\t\t\t<div class="logo"><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QOPaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzAxNCA3OS4xNTY3OTcsIDIwMTQvMDgvMjAtMDk6NTM6MDIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjA2OWU1ZDgtNDk1MS00OWNkLWE0YzMtMjI4MTI1YmNhNjBlIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA2MzVFRkZEMjM0QjExRTdBNUNBQUY0NzczMTRCRERFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MzVFRkZDMjM0QjExRTdBNUNBQUY0NzczMTRCRERFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Njk4NWFmZjItNTc1Yy00YWVhLWFiMTAtNmE2ZDE0NjdkMDlmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6N2QwOWYzMDUtNjA3YS0xMTdhLTg5ZTItODNiNjI3MjVkMmNmIi8+IDwv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" alt=""></div>\n\t\t\t\t<ul class="nav">\n\t\t\t\t\t<li class="panel-heading active">\n\t\t\t\t\t\t<a class="auto panelTab">\n\t\t\t\t\t\t\t<span class="pull-left icon-put"></span>\n\t\t\t\t\t\t\t<span>投放管理</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="nav nav-sub">\n\t\t\t\t\t\t\t<li class="nav-sub-header">\n\t\t\t\t\t\t\t<a class="menuTab" id="adList" data-url="adList">\n\t\t\t\t\t\t\t\t<span>广告投放</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="panel-heading active">\n\t\t\t\t\t\t<a class="auto panelTab">\n\t\t\t\t\t\t\t<span class="pull-left icon-count"></span>\n\t\t\t\t\t\t\t<span>结算管理</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="nav nav-sub">\n\t\t\t\t\t\t\t<li class="nav-sub-header">\n\t\t\t\t\t\t\t\t<a class="menuTab" id="count" data-url="count">\n\t\t\t\t\t\t\t\t\t<span>统计结算</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t\n\t\t\t\t\t<li class="panel-heading active">\n\t\t\t\t\t\t<a class="auto panelTab">\n\t\t\t\t\t\t\t<span class="pull-left icon-count"></span>\n\t\t\t\t\t\t\t<span>配置管理</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="nav nav-sub">\n\t\t\t\t\t\t\t<li class="nav-sub-header">\n\t\t\t\t\t\t\t\t<a class="menuTab" id="wxconfig" data-url="wxconfig">\n\t\t\t\t\t\t\t\t\t<span>微信配置</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t'};var st=function(){return'\n    <div th:fragment="header" xmlns:th="http://www.thymeleaf.org">\n      <div class="app-header navbar">\n        <div class="pos-rlt navbar-collapse box-shadow bg-white-only">\n          <div class="signout">\n            <span class="username"></span>！<a class="logout"></a>\n          </div>\n        </div>\n      </div>\n    </div>\n  '},dt={init:function(){$.ajax({type:"get",url:"/rest/admin/getUserInfo",dateType:"json",success(t){t.success&&$(".username").text(t.username)}}),$(".logout").click(function(){$.ajax({type:"get",url:"/rest/admin/logout",dateType:"json",success(t){if("0002005"!=t.code)if(t.success){var e="http://"+(a=window.location.host)+"/view/login.html";window.location.href=e}else alert(t.msg);else{var a=window.location.host;window.location.href="http://"+a+"/view/login.html"}}})})}};function ot(t){switch($(".menuTab").css("color","#fff"),t){case"wxagent2config":it.init("2"),$(".aside-wrap #wxconfig").parents("ul").show(),$(".aside-wrap #wxconfig").css("color","#fdd105");break;case"wxconfig":it.init("1"),$(".aside-wrap #wxconfig").parents("ul").show(),$(".aside-wrap #wxconfig").css("color","#fdd105");break;case"count":E.init(),$(".aside-wrap #count").parents("ul").show(),$(".aside-wrap #count").css("color","#fdd105");break;case"adList":D.init(),$(".aside-wrap #adList").parents("ul").show(),$(".aside-wrap #adList").css("color","#fdd105");break;case"create":create.init(),$(".aside-wrap #adList").parents("ul").show(),$(".aside-wrap #adList").css("color","#fdd105");break;case"agent":agent.init(),$(".aside-wrap #adList").parents("ul").show(),$(".aside-wrap #adList").css("color","#fdd105");break;case"shop":shop.init(),$(".aside-wrap #adList").parents("ul").show(),$(".aside-wrap #adList").css("color","#fdd105");break;case"area":area.init(),$(".aside-wrap #adList").parents("ul").show(),$(".aside-wrap #adList").css("color","#fdd105");break;default:history.pushState({},null,"main.html")}}function rt(){var t,e=window.location.hash;return t=-1==e.indexOf("?")?e.split("#")[1]:e.substring(e.indexOf("#")+1,e.indexOf("?")),$(".app-main-content").remove(),t}$(".app").html(lt()+st()),dt.init(),$(".panelTab").click(function(){$(this).parent().find("ul").is(":hidden")?$(this).parent().find("ul").slideDown():$(this).parent().find("ul").slideUp()}),ot(rt()),$(".menuTab").click(function(){var t=$(this).attr("data-url");history.pushState({},null,"#"+t),$(".app-main-content").remove(),ot(t)}),window.addEventListener("hashchange",function(){ot(rt())})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);